!function(){function t(t,c){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}function c(t,c){for(var e=0;e<c.length;e++){var a=c[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,e,a){return e&&c(t.prototype,e),a&&c(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"zIO/":function(c,a,i){"use strict";i.r(a),i.d(a,"ComplaintsModule",function(){return Lt});var n=i("ofXK"),l=i("sYmb"),r=i("3Pt+"),o=i("tyNb"),s=i("HYn3"),u=i("LavL"),b=i("M9IT"),d=i("Dh3D"),m=i("+0xr"),p=i("quSY"),f=i("mrSG"),g=i("0IaG"),v=i("fXoL"),h=i("kmnG"),k=i("qFsG"),y=i("bTqV"),D=i("NFeN"),S=["input"];function P(t,c){if(1&t&&(v.bc(0,"span"),v.Qc(1),v.Wb(2,"br"),v.ac()),2&t){var e=c.$implicit,a=c.index;v.Kb(1),v.Tc("",a+1," .\xa0",e.name,"")}}function Q(t,c){if(1&t&&v.Wb(0,"img",17),2&t){var e=v.mc().$implicit;v.tc("src",e,v.Hc)}}function w(t,c){if(1&t&&(v.bc(0,"div",15),v.Pc(1,Q,1,1,"img",16),v.Wb(2,"br"),v.Wb(3,"br"),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.tc("ngIf",e)}}var O,C=((O=function(){function c(e,a,i,n,l,r){t(this,c),this.helperService=e,this.router=a,this.awsS3=i,this.departmentsService=n,this.notification=l,this.data=r,this.reply_image=[]}return e(c,[{key:"ngOnInit",value:function(){this.ticketData=this.data.payload}},{key:"upload",value:function(t,c){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileName=t,e.next=3,this.awsS3.uploadFile(t,"uploads").then(function(t){var e;c?c.fileUrl=null===(e=t[0])||void 0===e?void 0:e.Location:(a.reply_image=t.map(function(t){return t.Location}),console.log("student_image_path",a.reply_image))});case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}))}},{key:"SendReplay",value:function(){var t=this,c={uuid:this.ticketData.uuid,reply:{reply_message:this.message.nativeElement.value?this.message.nativeElement.value:"",reply_image:this.reply_image.length?this.reply_image:[],createdOn:new Date},modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};this.departmentsService.sendRepay(c).subscribe(function(c){c&&t.notification.showNotification({type:s.W.SUCCESS,payload:{message:"Reply sent successfully",statusCode:200,statusText:"Successfully",status:201}})})}}]),c}()).\u0275fac=function(t){return new(t||O)(v.Vb(s.P),v.Vb(o.f),v.Vb(s.a),v.Vb(s.E),v.Vb(s.V),v.Vb(g.a))},O.\u0275cmp=v.Pb({type:O,selectors:[["application-send-reply"]],viewQuery:function(t,c){var e;1&t&&v.Vc(S,!0),2&t&&v.Bc(e=v.jc())&&(c.message=e.first)},decls:27,vars:4,consts:[[1,"container"],[2,"text-align","center"],[1,"row"],["id","replay",1,"col-sm-12"],["appearance","outline"],["matInput","","placeholder","send message.."],["input",""],["type","button","mat-raised-button","",1,"savebutton",3,"click"],[4,"ngFor","ngForOf"],["type","file","multiple","",3,"change"],["filePicker",""],["class","col-sm-4",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-dialog-close","","translate","",1,"btn","btn-danger","savebutton"],["type","button","mat-dialog-close","",1,"btn","btn-primary","savebutton",3,"disabled","click"],[1,"col-sm-4"],["style","width: 100%;height: 250px;",3,"src",4,"ngIf"],[2,"width","100%","height","250px",3,"src"]],template:function(t,c){if(1&t){var e=v.cc();v.bc(0,"div",0),v.bc(1,"h2",1),v.Qc(2,"Reply\xa0To\xa0"),v.bc(3,"span"),v.Qc(4),v.ac(),v.ac(),v.bc(5,"div",2),v.bc(6,"div",3),v.bc(7,"mat-form-field",4),v.Wb(8,"textarea",5,6),v.ac(),v.bc(10,"div"),v.bc(11,"button",7),v.ic("click",function(){return v.Fc(e),v.Cc(18).click()}),v.bc(12,"mat-icon"),v.Qc(13,"image"),v.ac(),v.Qc(14,"Reply Image "),v.ac(),v.Qc(15,"\xa0 "),v.Pc(16,P,3,2,"span",8),v.bc(17,"input",9,10),v.ic("change",function(t){return c.upload(t.target.files)}),v.ac(),v.ac(),v.bc(19,"div",2),v.Pc(20,w,4,1,"div",11),v.ac(),v.ac(),v.bc(21,"div",12),v.bc(22,"button",13),v.Qc(23,"Cancel"),v.ac(),v.Qc(24,"\xa0 "),v.bc(25,"button",14),v.ic("click",function(){return c.SendReplay()}),v.Qc(26,"Send"),v.ac(),v.ac(),v.ac(),v.ac()}2&t&&(v.Kb(4),v.Rc(null==c.ticketData?null:c.ticketData.ticketId),v.Kb(12),v.tc("ngForOf",c.fileName),v.Kb(4),v.tc("ngForOf",c.reply_image),v.Kb(5),v.tc("disabled",!(null!=c.message&&null!=c.message.nativeElement&&c.message.nativeElement.value)&&0==(null==c.reply_image?null:c.reply_image.length)))},directives:[h.b,k.b,y.a,D.a,n.n,g.d,g.e,l.a,n.o],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3498db}"]}),O),K=i("d3UM"),T=i("FKr1"),_=i("Qu3c"),M=i("STbY");function I(t,c){if(1&t){var e=v.cc();v.bc(0,"mat-option",31),v.ic("click",function(){v.Fc(e);var t=c.$implicit;return v.mc().getDepartmentTickets(t)}),v.Qc(1),v.ac()}if(2&t){var a=c.$implicit;v.tc("value",a),v.Kb(1),v.Sc(" ",a.title,"")}}function R(t,c){if(1&t){var e=v.cc();v.bc(0,"mat-option",31),v.ic("click",function(){v.Fc(e);var t=c.$implicit;return v.mc().filterTicketsByStatus(t)}),v.Qc(1),v.ac()}if(2&t){var a=c.$implicit;v.tc("value",a),v.Kb(1),v.Sc(" ",a.title,"")}}function x(t,c){1&t&&(v.bc(0,"th",32),v.Qc(1," S.No "),v.ac())}function F(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit,a=v.mc();v.Kb(1),v.Rc(a.dataSource.filteredData.indexOf(e)+1)}}function U(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Ticket\xa0Id "),v.ac())}function W(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(e.ticketId)}}function $(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Course "),v.ac())}function L(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(null==e||null==e.courses?null:e.courses.title)}}function B(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Department "),v.ac())}function V(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(null==e.department?null:e.department.title)}}function N(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Mobile "),v.ac())}function Y(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(null==e||null==e.user?null:e.user.mobile)}}function E(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Message "),v.ac())}function Z(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.nc(2,"slice"),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Sc("",v.qc(2,1,e.message,0,30),"...")}}function H(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Type "),v.ac())}function A(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit,a=v.mc();v.Kb(1),v.Rc(null==a.helperService||null==a.helperService.TicketType[e.type-1]?null:a.helperService.TicketType[e.type-1].title)}}function j(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Priority "),v.ac())}function z(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(e.priority)}}function G(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," CreatedOn "),v.ac())}function q(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.nc(2,"date"),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(v.pc(2,1,e.createdOn,"mediumDate"))}}function J(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," LastUpdated "),v.ac())}function X(t,c){if(1&t&&(v.bc(0,"td",33),v.Qc(1),v.nc(2,"date"),v.ac()),2&t){var e=c.$implicit;v.Kb(1),v.Rc(v.pc(2,1,e.lastUpdated,"mediumDate"))}}function tt(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Status "),v.ac())}function ct(t,c){if(1&t&&(v.bc(0,"td",33),v.bc(1,"strong"),v.Qc(2),v.ac(),v.ac()),2&t){var e=c.$implicit,a=v.mc();v.Kb(1),v.Mc("color",null==a.helperService||null==a.helperService.TicketStatus[e.status-1]?null:a.helperService.TicketStatus[e.status-1].color),v.Kb(1),v.Rc(null==a.helperService||null==a.helperService.TicketStatus[e.status-1]?null:a.helperService.TicketStatus[e.status-1].title)}}function et(t,c){1&t&&(v.bc(0,"th",34),v.Qc(1," Actions "),v.ac())}function at(t,c){if(1&t){var e=v.cc();v.bc(0,"i",41),v.ic("click",function(){v.Fc(e);var t=v.mc().$implicit;return v.mc().sendReplay(t)}),v.Qc(1,"reply"),v.ac()}}function it(t,c){1&t&&(v.bc(0,"i",42),v.Qc(1,"reply"),v.ac())}function nt(t,c){1&t&&(v.bc(0,"i",42),v.Qc(1,"more_vert"),v.ac())}function lt(t,c){if(1&t&&(v.bc(0,"i",43),v.Qc(1,"more_vert"),v.ac()),2&t){v.mc();var e=v.Cc(8);v.tc("matMenuTriggerFor",e)}}function rt(t,c){if(1&t){var e=v.cc();v.bc(0,"button",44),v.ic("click",function(){v.Fc(e);var t=c.$implicit,a=v.mc().$implicit;return v.mc().updateTicketStatus(a,t.value)}),v.Qc(1),v.ac()}if(2&t){var a=c.$implicit;v.Kb(1),v.Sc("",a.title," ")}}function ot(t,c){if(1&t){var e=v.cc();v.bc(0,"td",33),v.bc(1,"i",35),v.ic("click",function(){v.Fc(e);var t=c.$implicit;return v.mc().viewTicket(t)}),v.Qc(2,"visibility"),v.ac(),v.Pc(3,at,2,0,"i",36),v.Pc(4,it,2,0,"i",37),v.Pc(5,nt,2,0,"i",37),v.Pc(6,lt,2,1,"i",38),v.bc(7,"mat-menu",null,39),v.Pc(9,rt,2,1,"button",40),v.ac(),v.ac()}if(2&t){var a=c.$implicit,i=v.mc();v.Kb(3),v.tc("ngIf",4!=a.status&&5!=a.status),v.Kb(1),v.tc("ngIf",4==a.status||5==a.status),v.Kb(1),v.tc("ngIf",4==a.status||5==a.status),v.Kb(1),v.tc("ngIf",4!=a.status&&5!=a.status),v.Kb(3),v.tc("ngForOf",null==i.helperService?null:i.helperService.TicketStatus)}}function st(t,c){1&t&&v.Wb(0,"tr",45)}function ut(t,c){1&t&&v.Wb(0,"tr",46)}function bt(t,c){1&t&&(v.bc(0,"tr",47),v.bc(1,"td",48),v.bc(2,"h3",6),v.Qc(3,"COMMON.NO_DATA"),v.ac(),v.ac(),v.ac())}var dt,mt=((dt=function(){function c(e,a,i,n){t(this,c),this.departmentsService=e,this.helperService=a,this.router=i,this.dialog=n,this.totalLength=[10,25,50,100],this.sub=new p.a,this.displayedColumns=["sno","ticketId","course","department","mobile","message","type","priority","createdOn","lastUpdated","status","actions"]}return e(c,[{key:"ngOnInit",value:function(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.getTickets(),localStorage.removeItem("ticket")}},{key:"getTickets",value:function(){var t=this,c={departmentId:this.currentUser.department.map(function(t){return t._id})};this.departmentsService.getAllTickets(c).subscribe(function(c){t.tickets=t.filterdTickets=null==c?void 0:c.response,console.log("this.filterdTickets ",t.filterdTickets),t.dataSource=new m.l(t.filterdTickets),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort})}},{key:"filterComplaints",value:function(t){var c=t.target.value.toLowerCase().trim();this.dataSource=c?this.tickets.filter(function(t){var e;return(null==t?void 0:t.ticketId.toLowerCase().includes(c))||(null==t?void 0:t.message.toLowerCase().includes(c))||(null==t?void 0:t.priority.toLowerCase().includes(c))||(null===(e=null==t?void 0:t.department)||void 0===e?void 0:e.title.toLowerCase().includes(c))}):this.tickets,this.dataSource=new m.l(this.dataSource),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"getDepartmentTickets",value:function(t){var c=this;this.departmentsService.getAllTickets({departmentId:[t._id]}).subscribe(function(t){c.tickets=c.filterdTickets=null==t?void 0:t.response,c.dataSource=new m.l(c.filterdTickets),c.dataSource.paginator=c.paginator,c.dataSource.sort=c.sort})}},{key:"updateTicketStatus",value:function(t,c){var e=this,a={uuid:t.uuid,status:c,modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};this.departmentsService.updateTicket(a).subscribe(function(t){t&&e.getTickets()})}},{key:"filterTicketsByStatus",value:function(t){var c=t.value;this.dataSource=c?this.tickets.filter(function(t){return null==t?void 0:t.status.toString().toLowerCase().includes(c)}):this.tickets,this.dataSource=new m.l(this.dataSource),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"viewTicket",value:function(t){this.router.navigate(["manage/complaints/ticket/view"]),localStorage.setItem("ticketUUid",t.uuid)}},{key:"sendReplay",value:function(t){this.dialog.open(C,{data:{payload:t},height:"96%",width:"80%"})}}]),c}()).\u0275fac=function(t){return new(t||dt)(v.Vb(s.E),v.Vb(s.P),v.Vb(o.f),v.Vb(g.c))},dt.\u0275cmp=v.Pb({type:dt,selectors:[["application-complaints-list"]],viewQuery:function(t,c){var e;1&t&&(v.Lc(d.a,!0),v.Lc(b.a,!0)),2&t&&(v.Bc(e=v.jc())&&(c.sort=e.first),v.Bc(e=v.jc())&&(c.paginator=e.first))},decls:66,vars:10,consts:[[1,"tag-list"],[1,"page-title"],[1,"title"],[1,"row"],[1,"col-sm-8"],[1,"example-full-width"],["translate",""],["type","search","matInput","","name","search",3,"placeholder","keyup"],[1,"col-sm-2"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mat-elevation-z1"],["mat-table","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","","style","width: 20px;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ticketId"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","course"],["matColumnDef","department"],["matColumnDef","mobile"],["matColumnDef","message"],["matColumnDef","type"],["matColumnDef","priority"],["matColumnDef","createdOn"],["matColumnDef","lastUpdated"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row","style","text-align: center;",4,"matNoDataRow"],[3,"showFirstLastButtons","pageSizeOptions"],[3,"value","click"],["mat-header-cell","",2,"width","20px"],["mat-cell",""],["mat-header-cell",""],["matTooltip","View Ticket",1,"material-icons",2,"color","#102f95",3,"click"],["class","material-icons","style","color: #951093;","matTooltip","Reply",3,"click",4,"ngIf"],["class","material-icons","style","cursor: not-allowed;background-color:whitesmoke",4,"ngIf"],["class","material-icons","matTooltip","Update Status",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["matTooltip","Reply",1,"material-icons",2,"color","#951093",3,"click"],[1,"material-icons",2,"cursor","not-allowed","background-color","whitesmoke"],["matTooltip","Update Status",1,"material-icons",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row",2,"text-align","center"],["colspan","11",1,"mat-cell"]],template:function(t,c){1&t&&(v.bc(0,"div",0),v.bc(1,"div",1),v.bc(2,"div",2),v.bc(3,"h2"),v.Qc(4,"Tickets"),v.ac(),v.ac(),v.ac(),v.bc(5,"div",3),v.bc(6,"div",4),v.bc(7,"mat-form-field",5),v.bc(8,"mat-label",6),v.Qc(9,"COMMON.SEARCH"),v.ac(),v.bc(10,"input",7),v.ic("keyup",function(t){return c.filterComplaints(t)}),v.nc(11,"translate"),v.ac(),v.ac(),v.ac(),v.bc(12,"div",8),v.bc(13,"mat-form-field",5),v.bc(14,"mat-label"),v.Qc(15,"Select\xa0Department"),v.ac(),v.bc(16,"mat-select"),v.Pc(17,I,2,2,"mat-option",9),v.ac(),v.ac(),v.ac(),v.bc(18,"div",8),v.bc(19,"mat-form-field",5),v.bc(20,"mat-label"),v.Qc(21,"Select\xa0Status"),v.ac(),v.bc(22,"mat-select"),v.Pc(23,R,2,2,"mat-option",9),v.ac(),v.ac(),v.ac(),v.ac(),v.bc(24,"div",10),v.bc(25,"table",11),v.Zb(26,12),v.Pc(27,x,2,0,"th",13),v.Pc(28,F,2,1,"td",14),v.Yb(),v.Zb(29,15),v.Pc(30,U,2,0,"th",16),v.Pc(31,W,2,1,"td",14),v.Yb(),v.Zb(32,17),v.Pc(33,$,2,0,"th",16),v.Pc(34,L,2,1,"td",14),v.Yb(),v.Zb(35,18),v.Pc(36,B,2,0,"th",16),v.Pc(37,V,2,1,"td",14),v.Yb(),v.Zb(38,19),v.Pc(39,N,2,0,"th",16),v.Pc(40,Y,2,1,"td",14),v.Yb(),v.Zb(41,20),v.Pc(42,E,2,0,"th",16),v.Pc(43,Z,3,5,"td",14),v.Yb(),v.Zb(44,21),v.Pc(45,H,2,0,"th",16),v.Pc(46,A,2,1,"td",14),v.Yb(),v.Zb(47,22),v.Pc(48,j,2,0,"th",16),v.Pc(49,z,2,1,"td",14),v.Yb(),v.Zb(50,23),v.Pc(51,G,2,0,"th",16),v.Pc(52,q,3,4,"td",14),v.Yb(),v.Zb(53,24),v.Pc(54,J,2,0,"th",16),v.Pc(55,X,3,4,"td",14),v.Yb(),v.Zb(56,25),v.Pc(57,tt,2,0,"th",16),v.Pc(58,ct,3,3,"td",14),v.Yb(),v.Zb(59,26),v.Pc(60,et,2,0,"th",16),v.Pc(61,ot,10,5,"td",14),v.Yb(),v.Pc(62,st,1,0,"tr",27),v.Pc(63,ut,1,0,"tr",28),v.Pc(64,bt,4,0,"tr",29),v.ac(),v.Wb(65,"mat-paginator",30),v.ac(),v.ac()),2&t&&(v.Kb(10),v.tc("placeholder",v.oc(11,8,"PAGE.ORGANIZATION_LIST.SEARCH")),v.Kb(7),v.tc("ngForOf",null==c.currentUser?null:c.currentUser.department),v.Kb(6),v.tc("ngForOf",null==c.helperService?null:c.helperService.TicketStatus),v.Kb(2),v.tc("dataSource",c.dataSource),v.Kb(37),v.tc("matHeaderRowDef",c.displayedColumns),v.Kb(1),v.tc("matRowDefColumns",c.displayedColumns),v.Kb(2),v.tc("showFirstLastButtons",!0)("pageSizeOptions",c.totalLength))},directives:[h.b,h.e,l.a,k.b,K.a,n.n,m.k,m.c,m.e,m.b,m.g,m.j,m.h,b.a,T.m,m.d,m.a,_.a,n.o,M.a,M.d,M.b,m.f,m.i],pipes:[l.d,n.w,n.f],styles:[".material-icons[_ngcontent-%COMP%]{cursor:pointer;margin:2px;border:1px solid #e7e6e6;border-radius:7px;padding:1px}.tag-list[_ngcontent-%COMP%]{margin:1rem 0}.tag-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:1rem;width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-align:center;border:1px solid #efeeee}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]}),dt),pt=i("Wp6s"),ft=["input"];function gt(t,c){if(1&t&&(v.bc(0,"div",10),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Message"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData?null:e.ticketData.message)}}function vt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3," Ticket Id"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData?null:e.ticketData.ticketId)}}function ht(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"User Name"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData||null==e.ticketData.user?null:e.ticketData.user.name)}}function kt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"User Mobile"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData||null==e.ticketData.user?null:e.ticketData.user.mobile)}}function yt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Department"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData||null==e.ticketData.department?null:e.ticketData.department.title)}}function Dt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Type"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.helperService||null==e.helperService.TicketType[(null==e.ticketData?null:e.ticketData.type)-1]?null:e.helperService.TicketType[(null==e.ticketData?null:e.ticketData.type)-1].title)}}function St(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Priority"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData?null:e.ticketData.priority)}}function Pt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Created On"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.nc(8,"date"),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(v.pc(8,1,null==e.ticketData?null:e.ticketData.createdOn,"mediumDate"))}}function Qt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Last Updated"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.nc(8,"date"),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(v.pc(8,1,null==e.ticketData?null:e.ticketData.lastUpdated,"mediumDate"))}}function wt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Status"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"strong"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(6),v.Mc("color",null==e.helperService||null==e.helperService.TicketStatus[(null==e.ticketData?null:e.ticketData.status)-1]?null:e.helperService.TicketStatus[(null==e.ticketData?null:e.ticketData.status)-1].color),v.Kb(1),v.Rc(null==e.helperService||null==e.helperService.TicketStatus[(null==e.ticketData?null:e.ticketData.status)-1]?null:e.helperService.TicketStatus[(null==e.ticketData?null:e.ticketData.status)-1].title)}}function Ot(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Closed \xa0On"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.nc(8,"date"),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(v.pc(8,1,null==e.ticketData?null:e.ticketData.closedDateTime,"mediumDate"))}}function Ct(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Modified\xa0By"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(null==e.ticketData||null==e.ticketData.modifiedBy?null:e.ticketData.modifiedBy.name)}}function Kt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3,"Modified\xa0On"),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.nc(8,"date"),v.ac(),v.ac()),2&t){var e=v.mc();v.Kb(7),v.Rc(v.pc(8,1,null==e.ticketData?null:e.ticketData.modifiedOn,"mediumDate"))}}function Tt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3),v.ac(),v.ac(),v.Wb(4,"br"),v.Wb(5,"br"),v.Wb(6,"img",13),v.ac()),2&t){var e=c.$implicit,a=c.index;v.Kb(3),v.Sc("Image\xa0File\xa0",a+1,""),v.Kb(3),v.tc("src",e,v.Hc)}}function _t(t,c){if(1&t&&(v.bc(0,"div",1),v.Pc(1,Tt,7,2,"div",12),v.ac()),2&t){var e=v.mc();v.Kb(1),v.tc("ngForOf",null==e.ticketData?null:e.ticketData.image)}}function Mt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3),v.ac(),v.ac(),v.Wb(4,"br"),v.Wb(5,"br"),v.bc(6,"audio",14),v.Wb(7,"source",15),v.Wb(8,"source",16),v.ac(),v.ac()),2&t){var e=c.$implicit,a=c.index;v.Kb(3),v.Sc("Audio\xa0File\xa0",a+1,""),v.Kb(4),v.tc("src",e,v.Hc),v.Kb(1),v.tc("src",e,v.Hc)}}function It(t,c){if(1&t&&(v.bc(0,"div",1),v.Pc(1,Mt,9,3,"div",12),v.ac()),2&t){var e=v.mc();v.Kb(1),v.tc("ngForOf",null==e.ticketData?null:e.ticketData.audio)}}function Rt(t,c){if(1&t&&(v.bc(0,"div",11),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3),v.ac(),v.ac(),v.Wb(4,"br"),v.Wb(5,"br"),v.Wb(6,"img",19),v.ac()),2&t){var e=c.$implicit,a=c.index;v.Kb(3),v.Sc("Replay\xa0Image\xa0File\xa0",a+1,""),v.Kb(3),v.tc("src",e,v.Hc)}}function xt(t,c){if(1&t&&(v.bc(0,"div",10),v.bc(1,"span"),v.bc(2,"b"),v.Qc(3),v.ac(),v.ac(),v.bc(4,"span"),v.Qc(5,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(6,"span"),v.Qc(7),v.ac(),v.Wb(8,"br"),v.bc(9,"span"),v.bc(10,"b"),v.Qc(11,"Created on"),v.ac(),v.ac(),v.bc(12,"span"),v.Qc(13,"\xa0\xa0:\xa0\xa0"),v.ac(),v.bc(14,"span"),v.Qc(15),v.nc(16,"date"),v.ac(),v.Wb(17,"br"),v.bc(18,"div",1),v.Pc(19,Rt,7,2,"div",12),v.ac(),v.Wb(20,"hr"),v.ac()),2&t){var e=c.$implicit,a=c.index;v.Kb(3),v.Sc("Reply Message\xa0",a+1,""),v.Kb(4),v.Rc(null==e?null:e.reply_message),v.Kb(8),v.Rc(v.pc(16,4,null==e?null:e.createdOn,"medium")),v.Kb(4),v.tc("ngForOf",null==e?null:e.reply_image)}}function Ft(t,c){if(1&t&&(v.bc(0,"div",1),v.Wb(1,"hr"),v.bc(2,"h2",17),v.Qc(3,"Given Reply's"),v.ac(),v.Pc(4,xt,21,7,"div",18),v.ac()),2&t){var e=v.mc();v.Kb(4),v.tc("ngForOf",null==e.ticketData?null:e.ticketData.reply)}}var Ut,Wt,$t=[{path:"",children:[{path:"list",component:mt},{path:"ticket/view",component:(Ut=function(){function c(e,a,i,n,l){t(this,c),this.helperService=e,this.router=a,this.awsS3=i,this.departmentsService=n,this.dialog=l,this.reply_image=[]}return e(c,[{key:"ngOnInit",value:function(){this.getTickeData()}},{key:"getTickeData",value:function(){var t=this;this.ticketUUid=localStorage.getItem("ticketUUid"),this.departmentsService.getTicketByUUid(this.ticketUUid).subscribe(function(c){t.ticketData=c.response,console.log("this.ticketData",t.ticketData)})}},{key:"upload",value:function(t,c){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileName=t,console.log("event",t),e.next=4,this.awsS3.uploadFile(t,"uploads").then(function(t){var e;console.log("result",t),c?c.fileUrl=null===(e=t[0])||void 0===e?void 0:e.Location:(a.reply_image=t.map(function(t){return t.Location}),console.log("student_image_path",a.reply_image))});case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)}))}},{key:"updateCloseStatus",value:function(){var t=this,c={uuid:this.ticketData.uuid,status:4,reply_message:this.message.nativeElement.value?this.message.nativeElement.value:"",reply_image:this.reply_image.length?this.reply_image:[],modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};console.log("payload",c),this.departmentsService.updateTicket(c).subscribe(function(c){c&&t.router.navigate(["manage/complaints/list"])})}},{key:"backToTickets",value:function(){this.router.navigate(["manage/complaints/list"])}},{key:"sendReplay",value:function(){this.dialog.open(C,{data:{payload:this.ticketData},height:"96%",width:"80%"})}}]),c}(),Ut.\u0275fac=function(t){return new(t||Ut)(v.Vb(s.P),v.Vb(o.f),v.Vb(s.a),v.Vb(s.E),v.Vb(g.c))},Ut.\u0275cmp=v.Pb({type:Ut,selectors:[["application-view-ticket"]],viewQuery:function(t,c){var e;1&t&&v.Vc(ft,!0),2&t&&v.Bc(e=v.jc())&&(c.message=e.first)},decls:39,vars:17,consts:[[3,"click"],[1,"row"],["id","replay",1,"col-sm-12"],["class","col-sm-12",4,"ngIf"],["class","col-sm-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-sm-5"],[1,"col-sm-1"],["mat-raised-button","","color","primary",1,"paymentsButton",3,"click"],["mat-raised-button","","color","warn",1,"paymentsButton",3,"click"],[1,"col-sm-12"],[1,"col-sm-4"],["class","col-sm-4",4,"ngFor","ngForOf"],["alt","img",2,"width","100%","height","300px",3,"src"],["controls",""],["type","audio/ogg",3,"src"],["type","audio/mpeg",3,"src"],[2,"text-align","center"],["class","col-sm-12",4,"ngFor","ngForOf"],["alt","img",2,"width","100%","height","250px",3,"src"]],template:function(t,c){1&t&&(v.bc(0,"mat-card"),v.bc(1,"h2"),v.bc(2,"b",0),v.ic("click",function(){return c.backToTickets()}),v.Qc(3),v.ac(),v.Qc(4,"Ticket Details"),v.ac(),v.Wb(5,"br"),v.Wb(6,"br"),v.bc(7,"div",1),v.bc(8,"div",2),v.bc(9,"div",1),v.Pc(10,gt,8,1,"div",3),v.ac(),v.bc(11,"div",1),v.Pc(12,vt,8,1,"div",4),v.Pc(13,ht,8,1,"div",4),v.Pc(14,kt,8,1,"div",4),v.Pc(15,yt,8,1,"div",4),v.Pc(16,Dt,8,1,"div",4),v.Pc(17,St,8,1,"div",4),v.Pc(18,Pt,9,4,"div",4),v.Pc(19,Qt,9,4,"div",4),v.Pc(20,wt,8,3,"div",4),v.Pc(21,Ot,9,4,"div",4),v.Pc(22,Ct,8,1,"div",4),v.Pc(23,Kt,9,4,"div",4),v.ac(),v.Pc(24,_t,2,1,"div",5),v.Pc(25,It,2,1,"div",5),v.Wb(26,"br"),v.Pc(27,Ft,5,1,"div",5),v.ac(),v.ac(),v.Wb(28,"br"),v.Wb(29,"br"),v.bc(30,"div",1),v.Wb(31,"div",6),v.bc(32,"div",7),v.bc(33,"button",8),v.ic("click",function(){return c.sendReplay()}),v.Qc(34,"Reply"),v.ac(),v.ac(),v.bc(35,"div",7),v.bc(36,"button",9),v.ic("click",function(){return c.backToTickets()}),v.Qc(37,"Back"),v.ac(),v.ac(),v.Wb(38,"div",6),v.ac(),v.ac()),2&t&&(v.Kb(3),v.Sc("",null==c.ticketData?null:c.ticketData.ticketId,"\xa0/\xa0"),v.Kb(7),v.tc("ngIf",null==c.ticketData?null:c.ticketData.message),v.Kb(2),v.tc("ngIf",null==c.ticketData?null:c.ticketData.ticketId),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.user),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.user),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.department),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.type),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.priority),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.createdOn),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.lastUpdated),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.status),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.closedDateTime),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.modifiedBy),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.modifiedOn),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.image.length),v.Kb(1),v.tc("ngIf",null==c.ticketData?null:c.ticketData.audio.length),v.Kb(2),v.tc("ngIf",null==c.ticketData?null:c.ticketData.reply.length))},directives:[pt.a,n.o,y.a,n.n],pipes:[n.f],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:50px}td[_ngcontent-%COMP%]{width:250px}.paymentsButton[_ngcontent-%COMP%]{width:100%}.col-sm-4[_ngcontent-%COMP%]{margin-top:28px}.ticket[_ngcontent-%COMP%]{width:100%}span[_ngcontent-%COMP%]{width:33.33%}h2[_ngcontent-%COMP%]{font-size:22px;font-weight:600}h2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#3498db}h2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:hover{cursor:pointer;border-bottom:3px solid #3498db}#replay[_ngcontent-%COMP%]{border:1px solid #e0dfdf;border-radius:10px;margin-top:-28px}mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.savebutton[_ngcontent-%COMP%]{width:100%}"]}),Ut)},{path:"",outlet:"aside",component:u.a},{path:"",pathMatch:"full",redirectTo:"/manage/complaints/list"}]}],Lt=((Wt=function c(){t(this,c)}).\u0275mod=v.Tb({type:Wt}),Wt.\u0275inj=v.Sb({factory:function(t){return new(t||Wt)},imports:[[n.c,l.c,r.u,o.j.forChild($t),s.zb]]}),Wt)}}])}();