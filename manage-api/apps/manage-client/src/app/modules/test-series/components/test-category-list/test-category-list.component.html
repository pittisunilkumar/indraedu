<div class="test-series-category-list">

  <div class="mat-table-wrapper">
    <mat-form-field>
      <mat-label translate>COMMON.SEARCH</mat-label>
      <input matInput (keyup)="applyFilter($event)" [placeholder]="'COMMON.FILTER.BY_TITLE' | translate" #input />
    </mat-form-field>
    <!-- <div class="example-action-buttons">
      <button mat-stroked-button color="primary" (click)="accordion.openAll()">Expand All</button>&nbsp;&nbsp;
      <button mat-stroked-button color="warn" (click)="accordion.closeAll()">Collapse All</button>
    </div> -->
    <br>

    <div class="example-container">
      <div class="exampleBox">
        <table style="text-align: left;">
          <tr>
            <th style="width: 30px;">S.No</th>
            <th style="width: 200px;">Title</th>
            <th style="width: 100px;text-align: center;">Course</th>
            <th style="width: 50px;text-align: center;">Order</th>
            <th style="width: 50px;text-align: center;">Test&nbsp;Count</th>
            <th style="width: 100px;text-align: center;">Created&nbsp;On</th>
            <th style="width: 50px;text-align: center;">Status</th>
            <th style="width: 20px;text-align: center;">Actions</th>
          </tr>
        </table>
      </div>
      <!-- <div cdkDropList [cdkDropListData]="filteredList" class="example-list" (cdkDropListDropped)="drop($event)"> -->
      <div class="example-list">
        <div class="example-box" *ngFor="let cat of categories;let i= index">
          <table>
            <tr>
              <td style="width: 30px;">{{categories.indexOf(cat)+1}}</td>
              <td style="width: 200px;">{{ cat?.categories?.title}}</td>
              <td style="width: 100px;text-align: left;">{{ cat.courses?.title }}</td>
              <td style="width: 50px;text-align: left;">{{cat?.categories?.order }}</td>
              <td style="width: 50px;text-align: left;">{{ cat?.categories?.tests?.length }}</td>
              <td style="width: 100px;text-align: center;">{{cat?.createdOn | date:'mediumDate'}}</td>
              <td style="width: 50px;text-align: left;">
                <span *ngIf="!cat.flags?.active">
                  <b style="color: red;">{{cat.flags?.active}}</b>
                </span>
                <span *ngIf="cat.flags?.active">
                  <b style="color: green;">{{cat.flags?.active}}</b>
                </span>
              </td>
              <td style="width:20px;text-align: center;">
                <i class="material-icons" [matMenuTriggerFor]="menu">more_vert</i>
                <mat-menu #menu="matMenu">
                  <a *ngIf="createTestVisible" [routerLink]="['../', cat.uuid, 'tests', 'list']"
                    (click)="getCategoryUuid(cat)" style="text-decoration: none;">
                    <button mat-menu-item color="primary">
                      Get&nbsp;Tests
                    </button>
                  </a>
                  <button mat-menu-item color="primary" (click)="getCategoryUuid(cat)" *ngIf="createTestVisible"
                    [routerLink]="['../', cat.uuid, 'tests', 'add']">
                    {{ 'COMMON.CREATE' | translate }}
                    {{ 'PAGE.TEST_SERIES.TESTS' | translate }}
                  </button>
                  <button mat-menu-item (click)="delete.emit(cat)" *ngIf="deleteEnabled =='true'">
                    Delete&nbsp;Category
                  </button>
                  <a [routerLink]="['../', cat.uuid, 'edit']" *ngIf="editEnabled =='true'"
                    style="text-decoration: none;" (click)="$event.stopPropagation()">
                    <button mat-menu-item>
                      Edit&nbsp;Category
                    </button>
                  </a>
                </mat-menu>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <!-- </div> -->
    </div>

    <!-- <div class="mat-elevation-z8"> -->
    <!-- <mat-accordion class="example-headers-align" multi>
      <mat-expansion-panel *ngFor="let cat of categories;let i= index">
        <mat-expansion-panel-header (click)="getCategoryUuid(cat)">
          <mat-panel-title>
            <span>{{categories.indexOf(cat)+1 }}</span>.&nbsp;
            <span style="font-size: 17px;">{{ cat?.categories?.title }}&nbsp;<span style="color: #CB4335;">[
                {{cat.courses?.title}} ]</span></span>
          </mat-panel-title>
          <mat-panel-description>
            <table style="text-align: left;">
              <td> <span translate>COMMON.ORDER</span></td>&nbsp;&nbsp;
              <th style="width: 100px;">{{ cat?.categories?.order }}</th>
              <td> <span translate>Test&nbsp;Count</span></td>&nbsp;&nbsp;
              <th style="width: 100px;">{{cat?.categories?.tests?.length}}</th>
              <td> <span translate>Created&nbsp;On</span></td>&nbsp;&nbsp;
              <th style="width: 250px;">{{ cat?.createdOn | date:'mediumDate' }}</th>
              <td style="width: 20px;"></td>
              <th style="width: 20px;" *ngIf="!cat.flags?.active">
                <div style="background-color: red;width: 10px;height: 10px;border-radius: 10px;"></div>
              </th>
              <th style="width: 20px;" *ngIf="cat.flags?.active">
                <div style="background-color: green;width: 10px;height: 10px;border-radius: 10px;"></div>
              </th>
            </table>
           
          </mat-panel-description>
        </mat-expansion-panel-header>
        <br>

        <mat-action-row>
          <button mat-raised-button color="primary" *ngIf="createTestVisible"
            [routerLink]="['../', cat.uuid, 'tests', 'list']">
            Get&nbsp;Tests
          </button>
          <button mat-raised-button color="primary" *ngIf="createTestVisible"
            [routerLink]="['../', cat.uuid, 'tests', 'add']">
            {{ 'COMMON.CREATE' | translate }}
            {{ 'PAGE.TEST_SERIES.TESTS' | translate }}
          </button>
          <mat-icon class="view" mat-icon-button color="warn" *ngIf="deleteEnabled =='true'" (click)="delete.emit(cat)">
            delete
          </mat-icon>
          <a [routerLink]="['../', cat.uuid, 'edit']" *ngIf="editEnabled =='true'" style="text-decoration: none;"
            (click)="$event.stopPropagation()">
            <mat-icon color="primary" class="view" matTooltip="Edit">edit</mat-icon>
          </a>
        </mat-action-row>

      
      </mat-expansion-panel>
    </mat-accordion> -->

    <!-- </div> -->
  </div>

</div>



















<!-- <div class="test-series-category-list">

  <div class="mat-table-wrapper">
    <mat-form-field>
      <mat-label translate>COMMON.SEARCH</mat-label>
      <input
        matInput
        (keyup)="applyFilter($event)"
        [placeholder]="'COMMON.FILTER.BY_TITLE' | translate"
        #input
      />
    </mat-form-field>

    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="sno">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
           S.No
          </th>
          <td mat-cell *matCellDef="let row;let i = index">{{ dataSource.filteredData.indexOf(row)+1 }}</td>
        </ng-container>
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'COMMON.TITLE' | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.title }}</td>
        </ng-container>
        <ng-container matColumnDef="courses">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'COMMON.COURSE' | translate }}
          </th>
          <td mat-cell *matCellDef="let row">
            <div *ngFor="let course of row.courses">
                {{course.title}}
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="order">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'COMMON.ORDER' | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.order }}</td>
        </ng-container>

        <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'COMMON.ACTIVE' | translate }}
            </th>
            <td mat-cell *matCellDef="let row">
              <strong> {{ row?.flags?.active }} </strong>
            </td>
          </ng-container>

        <ng-container matColumnDef="createdOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'COMMON.CREATED_ON' | translate }}
          </th>
          <td mat-cell *matCellDef="let row">
            {{ helper.formatDate(row.createdOn) }}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>  {{ 'COMMON.ACTIONS.TITLE' | translate }}</th>
          <td mat-cell *matCellDef="let row">
            <mat-icon
              mat-icon-button
              color="warn"
              aria-label="Example icon button with a delete icon"
              (click)="delete.emit(row)">
              delete
            </mat-icon>
            <mat-icon
              mat-icon-button
              color="primary"
              aria-label="Example icon button with a delete icon"
              (click)="edit.emit(row)">
              edit
            </mat-icon>
            
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

       
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            No data matching the filter "{{ input.value }}"
          </td>
        </tr>
      </table>

      <mat-paginator [pageSizeOptions]="[10,25, 50, 100]"></mat-paginator>
    </div>
  </div>

</div> -->