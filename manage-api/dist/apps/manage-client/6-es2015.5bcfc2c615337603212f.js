(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1Mib":function(t,e,c){"use strict";c.r(e),c.d(e,"DashboardModule",function(){return Q});var a=c("ofXK"),n=c("sYmb"),s=c("tyNb"),i=c("HYn3"),o=c("mrSG"),r=c("w4Ql"),l=c("fXoL"),u=c("Wp6s"),d=c("NFeN");function h(t,e){if(1&t){const t=l.cc();l.bc(0,"mat-card",5),l.ic("click",function(){l.Fc(t);const e=l.mc().$implicit;return l.mc().getRouthPath(e.link)}),l.bc(1,"table"),l.bc(2,"tr"),l.bc(3,"td"),l.bc(4,"mat-icon"),l.Qc(5),l.ac(),l.ac(),l.bc(6,"td"),l.Wb(7,"div",6),l.ac(),l.bc(8,"td",7),l.bc(9,"h5"),l.Qc(10),l.ac(),l.bc(11,"h4"),l.Qc(12),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=l.mc().$implicit;l.uc("routerLink",t.link),l.Kb(5),l.Rc(t.icon),l.Kb(5),l.Rc(t.name),l.Kb(2),l.Rc(t.count.toLocaleString("en-IN"))}}function m(t,e){if(1&t&&(l.bc(0,"div",3),l.Pc(1,h,13,4,"mat-card",4),l.ac()),2&t){const t=e.index,c=l.mc();l.Kb(1),l.tc("ngIf",1==c.cardsArray[t].active)}}let b=(()=>{class t{constructor(t,e,c){this.roleService=t,this.helper=e,this.bannerRepo=c,this.cardsArray=[]}ngOnInit(){return Object(o.a)(this,void 0,void 0,function*(){this.currentUserType=localStorage.getItem("currentUserType");let t=localStorage.getItem("role");if(this.roleData=localStorage.getItem("roleData"),!this.roleData){let e=yield this.roleService.getRoleById(t).toPromise();localStorage.setItem("roleData",JSON.stringify(e.response)),location.reload()}yield this.loadPermissions()})}getRoutePath(t,e){localStorage.setItem("basePath",e),localStorage.setItem("routePath",t),localStorage.setItem("guardRoutePath",t),localStorage.setItem("guardBasePath",e)}loadPermissions(){return Object(o.a)(this,void 0,void 0,function*(){let t=this.helper.enumtoArray(r.d),e=this.helper.enumtoArray(r.e),c=localStorage.getItem("role"),a=yield this.bannerRepo.getDashboardCount().toPromise();console.log("count",a),c&&(yield this.roleService.getRoleById(c).toPromise()).response[0].rolePermissions.map(c=>{c.module[0].title==t.type.COURSES?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"auto_stories",name:"Courses",count:a.response[0].Course,link:"/manage/courses/list",active:!0}),this.getRoutePath("courses","manage"))}):c.module[0].title==t.type.SYLLABUS?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"subject",name:"Subjects",count:a.response[0].Syllabus,link:"/bank/syllabus/list",active:!0}),this.getRoutePath("syllabus","bank"))}):c.module[0].title==t.type.VIDEO_CYPHER?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"play_circle_outline",name:"Videos",count:a.response[0].Videos,link:"/bank/videoCipher/list",active:!0}),this.getRoutePath("videoSubjects","videos"))}):c.module[0].title==t.type.EMPLOYEE?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"people",name:"Employee",count:a.response[0].Employee,link:"/manage/employee/list",active:!0}),this.getRoutePath("employee","manage"))}):c.module[0].title==t.type.USERS?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"people",name:"Users",count:a.response[0].Users,link:"/manage/users/list",active:!0}),this.cardsArray.push({icon:"people",name:"Active Users",count:a.response[0].activeUsers,link:"/manage/users/list",active:!0}),this.cardsArray.push({icon:"people",name:"SubscribedUsers",count:a.response[0].SubscribedUserCount,link:"/manage/users/list",active:!0}),this.getRoutePath("user","manage"))}):c.module[0].title==t.type.TESTS?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"quiz",name:"Tests",count:a.response[0].Tests,link:"/test-series/categories/list",active:!0}),this.getRoutePath("categories","test-series"))}):c.module[0].title==t.type.SUBSCRIPTIONS?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"subscriptions",name:"Packages",count:a.response[0].Subscription,link:"/manage/subscriptions/list",active:!0}),this.getRoutePath("subscriptions","manage"))}):c.module[0].title==t.type.COUPONS?c.subModules.find(t=>{t.title==e.type.VIEW&&(this.cardsArray.push({icon:"sell",name:"Coupons",count:a.response[0].Coupons,link:"/manage/coupons/list",active:!0}),this.getRoutePath("coupons","manage"))}):c.module[0].title==t.type.AGENTS&&c.subModules.find(t=>{t.title==e.type.AGENT_COUPONS&&"AGENT"==this.currentUserType&&(this.cardsArray.push({icon:"sell",name:"Agents",count:0,link:"/agent/coupons",active:!0}),this.getRoutePath("faculty","manage"))})}),this.cardsArray=this.cardsArray.sort((t,e)=>t.name>e.name?1:e.name>t.name?-1:0)})}getRouthPath(t){let e=t.split("/").join(" "),c=e.split(" ")[1],a=e.split(" ")[2];localStorage.setItem("basePath",c),localStorage.setItem("routePath",a)}}return t.\u0275fac=function(e){return new(e||t)(l.Vb(i.mb),l.Vb(i.P),l.Vb(i.m))},t.\u0275cmp=l.Pb({type:t,selectors:[["application-dashboard"]],decls:4,vars:1,consts:[[2,"overflow","hidden"],[1,"row"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"col-sm-3"],[3,"routerLink","click",4,"ngIf"],[3,"routerLink","click"],[1,"vl"],[1,"titleHeading"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.Wb(1,"br"),l.bc(2,"div",1),l.Pc(3,m,2,1,"div",2),l.ac(),l.ac()),2&t&&(l.Kb(3),l.tc("ngForOf",e.cardsArray))},directives:[a.n,a.o,u.a,s.g,d.a],styles:[".titleHeading[_ngcontent-%COMP%]{width:100%;text-align:center}mat-card[_ngcontent-%COMP%]{width:100%;background-color:#fff;cursor:pointer;margin:0 0 20px}mat-icon[_ngcontent-%COMP%]{font-size:50px;color:#3498db}h4[_ngcontent-%COMP%]{font-weight:500}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#1b4f72}h5[_ngcontent-%COMP%]{font-weight:450}.vl[_ngcontent-%COMP%]{border-left:2px solid #d7dbdd;height:100px;margin-left:50px}"]}),t})();var p=c("0MNC"),y=c("kmnG"),g=c("d3UM"),f=c("icpI"),v=c("FKr1");function P(t,e){if(1&t&&(l.bc(0,"h1",15),l.Qc(1),l.nc(2,"currency"),l.ac()),2&t){const t=l.mc();l.Kb(1),l.Sc("",l.pc(2,1,null==t.payments?null:t.payments.today,"INR")," ")}}function w(t,e){1&t&&(l.bc(0,"h1",15),l.Qc(1,"\u20b90.00"),l.ac())}function S(t,e){if(1&t&&(l.bc(0,"h1",15),l.Qc(1),l.nc(2,"currency"),l.ac()),2&t){const t=l.mc();l.Kb(1),l.Rc(l.pc(2,1,null==t.payments?null:t.payments.this_week,"INR"))}}function k(t,e){1&t&&(l.bc(0,"h1",15),l.Qc(1,"\u20b90.00"),l.ac())}function I(t,e){if(1&t&&(l.bc(0,"h1",15),l.Qc(1),l.nc(2,"currency"),l.ac()),2&t){const t=l.mc();l.Kb(1),l.Rc(l.pc(2,1,null==t.payments?null:t.payments.this_month,"INR"))}}function R(t,e){1&t&&(l.bc(0,"h1",15),l.Qc(1,"\u20b90.00"),l.ac())}function W(t,e){if(1&t&&(l.bc(0,"h1",15),l.Qc(1),l.nc(2,"currency"),l.ac()),2&t){const t=l.mc();l.Kb(1),l.Rc(l.pc(2,1,null==t.payments?null:t.payments.this_year,"INR"))}}function C(t,e){1&t&&(l.bc(0,"h1",15),l.Qc(1,"\u20b90.00"),l.ac())}function M(t,e){if(1&t){const t=l.cc();l.bc(0,"mat-option",16),l.ic("click",function(){l.Fc(t);const c=e.$implicit;return l.mc().selectMonths(c)}),l.Qc(1),l.ac()}if(2&t){const t=e.$implicit;l.tc("value",t),l.Kb(1),l.Sc(" ",t,"\xa0Months")}}const O=[{path:"",runGuardsAndResolvers:"always",children:[{path:"",component:b,canActivate:[i.j]},{path:"payments",component:(()=>{class t{constructor(t,e,c){this.breakpointObserver=t,this.userTransactionsService=e,this.notification=c,this.months=[3,6,9,12],this.type="ColumnChart",this.data=[["",0]],this.weeklyData=[["",0]],this.columnNames=["","Income"],this.isMobile=!1,this.width=window.innerWidth,this.height=window.innerHeight,this.mobileWidth=760}ngOnInit(){this.userTransactionsService.yearwiseTransactions({months:3}).subscribe(t=>{this.data=t.response}),this.userTransactionsService.weeklyPayments().subscribe(t=>{this.weeklyData=t.response}),this.userTransactionsService.paymentsReports().subscribe(t=>{this.payments=t.response}),this.windowSize()}selectMonths(t){this.userTransactionsService.yearwiseTransactions({months:t}).subscribe(t=>{this.windowSize(),this.data=t.response,this.notification.showNotification({type:i.W.SUCCESS,payload:{message:"User Payments Fetched Successfully",statusCode:200,statusText:"Successfully",status:201}})})}windowSize(){this.columnOptions=this.width<760?{is3D:!0,responsive:!0,width:350,height:300,legend:{position:"top",maxLines:2},bar:{groupWidth:"50%"},isStacked:!1,animation:{duration:2e3,easing:"out"}}:{is3D:!0,responsive:!0,width:600,height:350,legend:{position:"top",maxLines:2},bar:{groupWidth:"50%"},isStacked:!1,animation:{duration:2e3,easing:"out"}}}onWindowResize(t){this.width=t.target.innerWidth,this.height=t.target.innerHeight,this.isMobile=this.width<this.mobileWidth,this.windowSize()}}return t.\u0275fac=function(e){return new(e||t)(l.Vb(p.a),l.Vb(i.Db),l.Vb(i.V))},t.\u0275cmp=l.Pb({type:t,selectors:[["application-payments-dashboard"]],hostBindings:function(t,e){1&t&&l.ic("resize",function(t){return e.onWindowResize(t)},!1,l.Ec)},decls:82,vars:23,consts:[[2,"overflow","hidden"],[1,"row"],[1,"col-sm-3"],[1,"dashboard",2,"background-color","#607D8B","color","white"],[1,"dashboard-card-content"],["style","text-align: center;font-weight: 500;",4,"ngIf"],[1,"dashboard",2,"background-color","rgb(245, 101, 130)","color","white"],[1,"dashboard",2,"background-color","#2196F3","color","white"],[1,"dashboard",2,"background-color","mediumpurple","color","white"],[1,"col-sm-4"],[3,"value","click",4,"ngFor","ngForOf"],[2,"color","#5D6D7E"],[1,"col-sm-6"],[3,"type","data","columns","options"],["type","PieChart",3,"data","columns","options"],[2,"text-align","center","font-weight","500"],[3,"value","click"]],template:function(t,e){1&t&&(l.bc(0,"div",0),l.bc(1,"div",1),l.bc(2,"div",2),l.bc(3,"mat-card",3),l.bc(4,"mat-card-header"),l.bc(5,"mat-card-title"),l.bc(6,"mat-icon"),l.Qc(7,"money"),l.ac(),l.Qc(8,"\xa0 "),l.bc(9,"span"),l.Qc(10,"Today"),l.ac(),l.ac(),l.ac(),l.bc(11,"mat-card-content",4),l.Pc(12,P,3,4,"h1",5),l.Pc(13,w,2,0,"h1",5),l.ac(),l.ac(),l.ac(),l.bc(14,"div",2),l.bc(15,"mat-card",6),l.bc(16,"mat-card-header"),l.bc(17,"mat-card-title"),l.bc(18,"mat-icon"),l.Qc(19,"payments"),l.ac(),l.Qc(20," \xa0 "),l.bc(21,"span"),l.Qc(22,"Current\xa0Week"),l.ac(),l.ac(),l.ac(),l.bc(23,"mat-card-content",4),l.Pc(24,S,3,4,"h1",5),l.Pc(25,k,2,0,"h1",5),l.ac(),l.ac(),l.ac(),l.bc(26,"div",2),l.bc(27,"mat-card",7),l.bc(28,"mat-card-header"),l.bc(29,"mat-card-title"),l.bc(30,"mat-icon"),l.Qc(31,"account_balance_wallet"),l.ac(),l.Qc(32," \xa0 "),l.bc(33,"span"),l.Qc(34,"Current\xa0Month"),l.ac(),l.ac(),l.ac(),l.bc(35,"mat-card-content",4),l.Pc(36,I,3,4,"h1",5),l.Pc(37,R,2,0,"h1",5),l.ac(),l.ac(),l.ac(),l.bc(38,"div",2),l.bc(39,"mat-card",8),l.bc(40,"mat-card-header"),l.bc(41,"mat-card-title"),l.bc(42,"mat-icon"),l.Qc(43,"local_atm"),l.ac(),l.Qc(44," \xa0 "),l.bc(45,"span"),l.Qc(46,"Current\xa0Year"),l.ac(),l.ac(),l.ac(),l.bc(47,"mat-card-content",4),l.Pc(48,W,3,4,"h1",5),l.Pc(49,C,2,0,"h1",5),l.ac(),l.ac(),l.ac(),l.ac(),l.Wb(50,"br"),l.Wb(51,"br"),l.bc(52,"mat-card"),l.bc(53,"div",1),l.bc(54,"div",9),l.bc(55,"mat-form-field"),l.bc(56,"mat-label"),l.Qc(57,"Select Months"),l.ac(),l.bc(58,"mat-select"),l.Pc(59,M,2,2,"mat-option",10),l.ac(),l.ac(),l.ac(),l.bc(60,"div",9),l.bc(61,"h2",11),l.Qc(62,"Monthly\xa0Payments"),l.ac(),l.ac(),l.Wb(63,"div",9),l.ac(),l.bc(64,"div",1),l.bc(65,"div",12),l.Wb(66,"google-chart",13),l.ac(),l.bc(67,"div",12),l.Wb(68,"google-chart",14),l.ac(),l.ac(),l.Wb(69,"br"),l.Wb(70,"br"),l.bc(71,"div",1),l.Wb(72,"div",9),l.bc(73,"div",9),l.bc(74,"h2",11),l.Qc(75,"Weekly\xa0Payments"),l.ac(),l.ac(),l.Wb(76,"div",9),l.ac(),l.bc(77,"div",1),l.bc(78,"div",12),l.Wb(79,"google-chart",13),l.ac(),l.bc(80,"div",12),l.Wb(81,"google-chart",14),l.ac(),l.ac(),l.ac(),l.ac()),2&t&&(l.Kb(12),l.tc("ngIf",null==e.payments?null:e.payments.today),l.Kb(1),l.tc("ngIf",!(null!=e.payments&&e.payments.today)),l.Kb(11),l.tc("ngIf",null==e.payments?null:e.payments.this_week),l.Kb(1),l.tc("ngIf",!(null!=e.payments&&e.payments.this_week)),l.Kb(11),l.tc("ngIf",null==e.payments?null:e.payments.this_month),l.Kb(1),l.tc("ngIf",!(null!=e.payments&&e.payments.this_month)),l.Kb(11),l.tc("ngIf",null==e.payments?null:e.payments.this_year),l.Kb(1),l.tc("ngIf",!(null!=e.payments&&e.payments.this_year)),l.Kb(10),l.tc("ngForOf",e.months),l.Kb(7),l.tc("type",e.type)("data",e.data)("columns",e.columnNames)("options",e.columnOptions),l.Kb(2),l.tc("data",e.data)("columns",e.columnNames)("options",e.columnOptions),l.Kb(11),l.tc("type",e.type)("data",e.weeklyData)("columns",e.columnNames)("options",e.columnOptions),l.Kb(2),l.tc("data",e.weeklyData)("columns",e.columnNames)("options",e.columnOptions))},directives:[u.a,u.e,u.g,d.a,u.d,a.o,y.b,y.e,g.a,a.n,f.a,v.m],pipes:[a.d],styles:[".dashboard[_ngcontent-%COMP%]{height:100px;margin:10px}"]}),t})(),canActivate:[i.j,i.ab]},{path:"",pathMatch:"full",redirectTo:"/dashboard"}]}];let Q=(()=>{class t{}return t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({factory:function(e){return new(e||t)},imports:[[a.c,n.c,s.j.forChild(O),i.zb,f.b]]}),t})()}}]);