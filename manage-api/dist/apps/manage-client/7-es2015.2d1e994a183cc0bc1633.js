(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"zIO/":function(t,c,e){"use strict";e.r(c),e.d(c,"ComplaintsModule",function(){return Rt});var i=e("ofXK"),a=e("sYmb"),n=e("3Pt+"),l=e("tyNb"),s=e("HYn3"),o=e("LavL"),r=e("M9IT"),u=e("Dh3D"),b=e("+0xr"),d=e("quSY"),m=e("mrSG"),p=e("0IaG"),f=e("fXoL"),g=e("kmnG"),h=e("qFsG"),k=e("bTqV"),v=e("NFeN");const D=["input"];function y(t,c){if(1&t&&(f.bc(0,"span"),f.Qc(1),f.Wb(2,"br"),f.ac()),2&t){const t=c.$implicit,e=c.index;f.Kb(1),f.Tc("",e+1," .\xa0",t.name,"")}}function S(t,c){if(1&t&&f.Wb(0,"img",17),2&t){const t=f.mc().$implicit;f.tc("src",t,f.Hc)}}function P(t,c){if(1&t&&(f.bc(0,"div",15),f.Pc(1,S,1,1,"img",16),f.Wb(2,"br"),f.Wb(3,"br"),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.tc("ngIf",t)}}let Q=(()=>{class t{constructor(t,c,e,i,a,n){this.helperService=t,this.router=c,this.awsS3=e,this.departmentsService=i,this.notification=a,this.data=n,this.reply_image=[]}ngOnInit(){this.ticketData=this.data.payload}upload(t,c){return Object(m.a)(this,void 0,void 0,function*(){return this.fileName=t,yield this.awsS3.uploadFile(t,"uploads").then(t=>{var e;c?c.fileUrl=null===(e=t[0])||void 0===e?void 0:e.Location:(this.reply_image=t.map(t=>t.Location),console.log("student_image_path",this.reply_image))}),!1})}SendReplay(){let t={uuid:this.ticketData.uuid,reply:{reply_message:this.message.nativeElement.value?this.message.nativeElement.value:"",reply_image:this.reply_image.length?this.reply_image:[],createdOn:new Date},modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};this.departmentsService.sendRepay(t).subscribe(t=>{t&&this.notification.showNotification({type:s.W.SUCCESS,payload:{message:"Reply sent successfully",statusCode:200,statusText:"Successfully",status:201}})})}}return t.\u0275fac=function(c){return new(c||t)(f.Vb(s.P),f.Vb(l.f),f.Vb(s.a),f.Vb(s.E),f.Vb(s.V),f.Vb(p.a))},t.\u0275cmp=f.Pb({type:t,selectors:[["application-send-reply"]],viewQuery:function(t,c){if(1&t&&f.Vc(D,!0),2&t){let t;f.Bc(t=f.jc())&&(c.message=t.first)}},decls:27,vars:4,consts:[[1,"container"],[2,"text-align","center"],[1,"row"],["id","replay",1,"col-sm-12"],["appearance","outline"],["matInput","","placeholder","send message.."],["input",""],["type","button","mat-raised-button","",1,"savebutton",3,"click"],[4,"ngFor","ngForOf"],["type","file","multiple","",3,"change"],["filePicker",""],["class","col-sm-4",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-dialog-close","","translate","",1,"btn","btn-danger","savebutton"],["type","button","mat-dialog-close","",1,"btn","btn-primary","savebutton",3,"disabled","click"],[1,"col-sm-4"],["style","width: 100%;height: 250px;",3,"src",4,"ngIf"],[2,"width","100%","height","250px",3,"src"]],template:function(t,c){if(1&t){const t=f.cc();f.bc(0,"div",0),f.bc(1,"h2",1),f.Qc(2,"Reply\xa0To\xa0"),f.bc(3,"span"),f.Qc(4),f.ac(),f.ac(),f.bc(5,"div",2),f.bc(6,"div",3),f.bc(7,"mat-form-field",4),f.Wb(8,"textarea",5,6),f.ac(),f.bc(10,"div"),f.bc(11,"button",7),f.ic("click",function(){return f.Fc(t),f.Cc(18).click()}),f.bc(12,"mat-icon"),f.Qc(13,"image"),f.ac(),f.Qc(14,"Reply Image "),f.ac(),f.Qc(15,"\xa0 "),f.Pc(16,y,3,2,"span",8),f.bc(17,"input",9,10),f.ic("change",function(t){return c.upload(t.target.files)}),f.ac(),f.ac(),f.bc(19,"div",2),f.Pc(20,P,4,1,"div",11),f.ac(),f.ac(),f.bc(21,"div",12),f.bc(22,"button",13),f.Qc(23,"Cancel"),f.ac(),f.Qc(24,"\xa0 "),f.bc(25,"button",14),f.ic("click",function(){return c.SendReplay()}),f.Qc(26,"Send"),f.ac(),f.ac(),f.ac(),f.ac()}2&t&&(f.Kb(4),f.Rc(null==c.ticketData?null:c.ticketData.ticketId),f.Kb(12),f.tc("ngForOf",c.fileName),f.Kb(4),f.tc("ngForOf",c.reply_image),f.Kb(5),f.tc("disabled",!(null!=c.message&&null!=c.message.nativeElement&&c.message.nativeElement.value)&&0==(null==c.reply_image?null:c.reply_image.length)))},directives:[g.b,h.b,k.a,v.a,i.n,p.d,p.e,a.a,i.o],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3498db}"]}),t})();var O=e("d3UM"),C=e("FKr1"),w=e("Qu3c"),K=e("STbY");function T(t,c){if(1&t){const t=f.cc();f.bc(0,"mat-option",31),f.ic("click",function(){f.Fc(t);const e=c.$implicit;return f.mc().getDepartmentTickets(e)}),f.Qc(1),f.ac()}if(2&t){const t=c.$implicit;f.tc("value",t),f.Kb(1),f.Sc(" ",t.title,"")}}function _(t,c){if(1&t){const t=f.cc();f.bc(0,"mat-option",31),f.ic("click",function(){f.Fc(t);const e=c.$implicit;return f.mc().filterTicketsByStatus(e)}),f.Qc(1),f.ac()}if(2&t){const t=c.$implicit;f.tc("value",t),f.Kb(1),f.Sc(" ",t.title,"")}}function M(t,c){1&t&&(f.bc(0,"th",32),f.Qc(1," S.No "),f.ac())}function I(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit,e=f.mc();f.Kb(1),f.Rc(e.dataSource.filteredData.indexOf(t)+1)}}function R(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Ticket\xa0Id "),f.ac())}function F(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(t.ticketId)}}function x(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Course "),f.ac())}function U(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(null==t||null==t.courses?null:t.courses.title)}}function W(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Department "),f.ac())}function $(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(null==t.department?null:t.department.title)}}function L(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Mobile "),f.ac())}function B(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(null==t||null==t.user?null:t.user.mobile)}}function V(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Message "),f.ac())}function N(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.nc(2,"slice"),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Sc("",f.qc(2,1,t.message,0,30),"...")}}function Y(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Type "),f.ac())}function E(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit,e=f.mc();f.Kb(1),f.Rc(null==e.helperService||null==e.helperService.TicketType[t.type-1]?null:e.helperService.TicketType[t.type-1].title)}}function Z(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Priority "),f.ac())}function H(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(t.priority)}}function A(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," CreatedOn "),f.ac())}function j(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.nc(2,"date"),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(f.pc(2,1,t.createdOn,"mediumDate"))}}function z(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," LastUpdated "),f.ac())}function G(t,c){if(1&t&&(f.bc(0,"td",33),f.Qc(1),f.nc(2,"date"),f.ac()),2&t){const t=c.$implicit;f.Kb(1),f.Rc(f.pc(2,1,t.lastUpdated,"mediumDate"))}}function q(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Status "),f.ac())}function J(t,c){if(1&t&&(f.bc(0,"td",33),f.bc(1,"strong"),f.Qc(2),f.ac(),f.ac()),2&t){const t=c.$implicit,e=f.mc();f.Kb(1),f.Mc("color",null==e.helperService||null==e.helperService.TicketStatus[t.status-1]?null:e.helperService.TicketStatus[t.status-1].color),f.Kb(1),f.Rc(null==e.helperService||null==e.helperService.TicketStatus[t.status-1]?null:e.helperService.TicketStatus[t.status-1].title)}}function X(t,c){1&t&&(f.bc(0,"th",34),f.Qc(1," Actions "),f.ac())}function tt(t,c){if(1&t){const t=f.cc();f.bc(0,"i",41),f.ic("click",function(){f.Fc(t);const c=f.mc().$implicit;return f.mc().sendReplay(c)}),f.Qc(1,"reply"),f.ac()}}function ct(t,c){1&t&&(f.bc(0,"i",42),f.Qc(1,"reply"),f.ac())}function et(t,c){1&t&&(f.bc(0,"i",42),f.Qc(1,"more_vert"),f.ac())}function it(t,c){if(1&t&&(f.bc(0,"i",43),f.Qc(1,"more_vert"),f.ac()),2&t){f.mc();const t=f.Cc(8);f.tc("matMenuTriggerFor",t)}}function at(t,c){if(1&t){const t=f.cc();f.bc(0,"button",44),f.ic("click",function(){f.Fc(t);const e=c.$implicit,i=f.mc().$implicit;return f.mc().updateTicketStatus(i,e.value)}),f.Qc(1),f.ac()}if(2&t){const t=c.$implicit;f.Kb(1),f.Sc("",t.title," ")}}function nt(t,c){if(1&t){const t=f.cc();f.bc(0,"td",33),f.bc(1,"i",35),f.ic("click",function(){f.Fc(t);const e=c.$implicit;return f.mc().viewTicket(e)}),f.Qc(2,"visibility"),f.ac(),f.Pc(3,tt,2,0,"i",36),f.Pc(4,ct,2,0,"i",37),f.Pc(5,et,2,0,"i",37),f.Pc(6,it,2,1,"i",38),f.bc(7,"mat-menu",null,39),f.Pc(9,at,2,1,"button",40),f.ac(),f.ac()}if(2&t){const t=c.$implicit,e=f.mc();f.Kb(3),f.tc("ngIf",4!=t.status&&5!=t.status),f.Kb(1),f.tc("ngIf",4==t.status||5==t.status),f.Kb(1),f.tc("ngIf",4==t.status||5==t.status),f.Kb(1),f.tc("ngIf",4!=t.status&&5!=t.status),f.Kb(3),f.tc("ngForOf",null==e.helperService?null:e.helperService.TicketStatus)}}function lt(t,c){1&t&&f.Wb(0,"tr",45)}function st(t,c){1&t&&f.Wb(0,"tr",46)}function ot(t,c){1&t&&(f.bc(0,"tr",47),f.bc(1,"td",48),f.bc(2,"h3",6),f.Qc(3,"COMMON.NO_DATA"),f.ac(),f.ac(),f.ac())}let rt=(()=>{class t{constructor(t,c,e,i){this.departmentsService=t,this.helperService=c,this.router=e,this.dialog=i,this.totalLength=[10,25,50,100],this.sub=new d.a,this.displayedColumns=["sno","ticketId","course","department","mobile","message","type","priority","createdOn","lastUpdated","status","actions"]}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.getTickets(),localStorage.removeItem("ticket")}getTickets(){let t={departmentId:this.currentUser.department.map(t=>t._id)};this.departmentsService.getAllTickets(t).subscribe(t=>{this.tickets=this.filterdTickets=null==t?void 0:t.response,console.log("this.filterdTickets ",this.filterdTickets),this.dataSource=new b.l(this.filterdTickets),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filterComplaints(t){const c=t.target.value.toLowerCase().trim();this.dataSource=c?this.tickets.filter(t=>{var e;return(null==t?void 0:t.ticketId.toLowerCase().includes(c))||(null==t?void 0:t.message.toLowerCase().includes(c))||(null==t?void 0:t.priority.toLowerCase().includes(c))||(null===(e=null==t?void 0:t.department)||void 0===e?void 0:e.title.toLowerCase().includes(c))}):this.tickets,this.dataSource=new b.l(this.dataSource),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getDepartmentTickets(t){this.departmentsService.getAllTickets({departmentId:[t._id]}).subscribe(t=>{this.tickets=this.filterdTickets=null==t?void 0:t.response,this.dataSource=new b.l(this.filterdTickets),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}updateTicketStatus(t,c){let e={uuid:t.uuid,status:c,modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};this.departmentsService.updateTicket(e).subscribe(t=>{t&&this.getTickets()})}filterTicketsByStatus(t){const c=t.value;this.dataSource=c?this.tickets.filter(t=>null==t?void 0:t.status.toString().toLowerCase().includes(c)):this.tickets,this.dataSource=new b.l(this.dataSource),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}viewTicket(t){this.router.navigate(["manage/complaints/ticket/view"]),localStorage.setItem("ticketUUid",t.uuid)}sendReplay(t){this.dialog.open(Q,{data:{payload:t},height:"96%",width:"80%"})}}return t.\u0275fac=function(c){return new(c||t)(f.Vb(s.E),f.Vb(s.P),f.Vb(l.f),f.Vb(p.c))},t.\u0275cmp=f.Pb({type:t,selectors:[["application-complaints-list"]],viewQuery:function(t,c){if(1&t&&(f.Lc(u.a,!0),f.Lc(r.a,!0)),2&t){let t;f.Bc(t=f.jc())&&(c.sort=t.first),f.Bc(t=f.jc())&&(c.paginator=t.first)}},decls:66,vars:10,consts:[[1,"tag-list"],[1,"page-title"],[1,"title"],[1,"row"],[1,"col-sm-8"],[1,"example-full-width"],["translate",""],["type","search","matInput","","name","search",3,"placeholder","keyup"],[1,"col-sm-2"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mat-elevation-z1"],["mat-table","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","","style","width: 20px;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ticketId"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","course"],["matColumnDef","department"],["matColumnDef","mobile"],["matColumnDef","message"],["matColumnDef","type"],["matColumnDef","priority"],["matColumnDef","createdOn"],["matColumnDef","lastUpdated"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row","style","text-align: center;",4,"matNoDataRow"],[3,"showFirstLastButtons","pageSizeOptions"],[3,"value","click"],["mat-header-cell","",2,"width","20px"],["mat-cell",""],["mat-header-cell",""],["matTooltip","View Ticket",1,"material-icons",2,"color","#102f95",3,"click"],["class","material-icons","style","color: #951093;","matTooltip","Reply",3,"click",4,"ngIf"],["class","material-icons","style","cursor: not-allowed;background-color:whitesmoke",4,"ngIf"],["class","material-icons","matTooltip","Update Status",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["matTooltip","Reply",1,"material-icons",2,"color","#951093",3,"click"],[1,"material-icons",2,"cursor","not-allowed","background-color","whitesmoke"],["matTooltip","Update Status",1,"material-icons",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row",2,"text-align","center"],["colspan","11",1,"mat-cell"]],template:function(t,c){1&t&&(f.bc(0,"div",0),f.bc(1,"div",1),f.bc(2,"div",2),f.bc(3,"h2"),f.Qc(4,"Tickets"),f.ac(),f.ac(),f.ac(),f.bc(5,"div",3),f.bc(6,"div",4),f.bc(7,"mat-form-field",5),f.bc(8,"mat-label",6),f.Qc(9,"COMMON.SEARCH"),f.ac(),f.bc(10,"input",7),f.ic("keyup",function(t){return c.filterComplaints(t)}),f.nc(11,"translate"),f.ac(),f.ac(),f.ac(),f.bc(12,"div",8),f.bc(13,"mat-form-field",5),f.bc(14,"mat-label"),f.Qc(15,"Select\xa0Department"),f.ac(),f.bc(16,"mat-select"),f.Pc(17,T,2,2,"mat-option",9),f.ac(),f.ac(),f.ac(),f.bc(18,"div",8),f.bc(19,"mat-form-field",5),f.bc(20,"mat-label"),f.Qc(21,"Select\xa0Status"),f.ac(),f.bc(22,"mat-select"),f.Pc(23,_,2,2,"mat-option",9),f.ac(),f.ac(),f.ac(),f.ac(),f.bc(24,"div",10),f.bc(25,"table",11),f.Zb(26,12),f.Pc(27,M,2,0,"th",13),f.Pc(28,I,2,1,"td",14),f.Yb(),f.Zb(29,15),f.Pc(30,R,2,0,"th",16),f.Pc(31,F,2,1,"td",14),f.Yb(),f.Zb(32,17),f.Pc(33,x,2,0,"th",16),f.Pc(34,U,2,1,"td",14),f.Yb(),f.Zb(35,18),f.Pc(36,W,2,0,"th",16),f.Pc(37,$,2,1,"td",14),f.Yb(),f.Zb(38,19),f.Pc(39,L,2,0,"th",16),f.Pc(40,B,2,1,"td",14),f.Yb(),f.Zb(41,20),f.Pc(42,V,2,0,"th",16),f.Pc(43,N,3,5,"td",14),f.Yb(),f.Zb(44,21),f.Pc(45,Y,2,0,"th",16),f.Pc(46,E,2,1,"td",14),f.Yb(),f.Zb(47,22),f.Pc(48,Z,2,0,"th",16),f.Pc(49,H,2,1,"td",14),f.Yb(),f.Zb(50,23),f.Pc(51,A,2,0,"th",16),f.Pc(52,j,3,4,"td",14),f.Yb(),f.Zb(53,24),f.Pc(54,z,2,0,"th",16),f.Pc(55,G,3,4,"td",14),f.Yb(),f.Zb(56,25),f.Pc(57,q,2,0,"th",16),f.Pc(58,J,3,3,"td",14),f.Yb(),f.Zb(59,26),f.Pc(60,X,2,0,"th",16),f.Pc(61,nt,10,5,"td",14),f.Yb(),f.Pc(62,lt,1,0,"tr",27),f.Pc(63,st,1,0,"tr",28),f.Pc(64,ot,4,0,"tr",29),f.ac(),f.Wb(65,"mat-paginator",30),f.ac(),f.ac()),2&t&&(f.Kb(10),f.tc("placeholder",f.oc(11,8,"PAGE.ORGANIZATION_LIST.SEARCH")),f.Kb(7),f.tc("ngForOf",null==c.currentUser?null:c.currentUser.department),f.Kb(6),f.tc("ngForOf",null==c.helperService?null:c.helperService.TicketStatus),f.Kb(2),f.tc("dataSource",c.dataSource),f.Kb(37),f.tc("matHeaderRowDef",c.displayedColumns),f.Kb(1),f.tc("matRowDefColumns",c.displayedColumns),f.Kb(2),f.tc("showFirstLastButtons",!0)("pageSizeOptions",c.totalLength))},directives:[g.b,g.e,a.a,h.b,O.a,i.n,b.k,b.c,b.e,b.b,b.g,b.j,b.h,r.a,C.m,b.d,b.a,w.a,i.o,K.a,K.d,K.b,b.f,b.i],pipes:[a.d,i.w,i.f],styles:[".material-icons[_ngcontent-%COMP%]{cursor:pointer;margin:2px;border:1px solid #e7e6e6;border-radius:7px;padding:1px}.tag-list[_ngcontent-%COMP%]{margin:1rem 0}.tag-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:1rem;width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-align:center;border:1px solid #efeeee}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]}),t})();var ut=e("Wp6s");const bt=["input"];function dt(t,c){if(1&t&&(f.bc(0,"div",10),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Message"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData?null:t.ticketData.message)}}function mt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3," Ticket Id"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData?null:t.ticketData.ticketId)}}function pt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"User Name"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData||null==t.ticketData.user?null:t.ticketData.user.name)}}function ft(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"User Mobile"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData||null==t.ticketData.user?null:t.ticketData.user.mobile)}}function gt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Department"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData||null==t.ticketData.department?null:t.ticketData.department.title)}}function ht(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Type"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.helperService||null==t.helperService.TicketType[(null==t.ticketData?null:t.ticketData.type)-1]?null:t.helperService.TicketType[(null==t.ticketData?null:t.ticketData.type)-1].title)}}function kt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Priority"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData?null:t.ticketData.priority)}}function vt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Created On"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.nc(8,"date"),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(f.pc(8,1,null==t.ticketData?null:t.ticketData.createdOn,"mediumDate"))}}function Dt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Last Updated"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.nc(8,"date"),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(f.pc(8,1,null==t.ticketData?null:t.ticketData.lastUpdated,"mediumDate"))}}function yt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Status"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"strong"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(6),f.Mc("color",null==t.helperService||null==t.helperService.TicketStatus[(null==t.ticketData?null:t.ticketData.status)-1]?null:t.helperService.TicketStatus[(null==t.ticketData?null:t.ticketData.status)-1].color),f.Kb(1),f.Rc(null==t.helperService||null==t.helperService.TicketStatus[(null==t.ticketData?null:t.ticketData.status)-1]?null:t.helperService.TicketStatus[(null==t.ticketData?null:t.ticketData.status)-1].title)}}function St(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Closed \xa0On"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.nc(8,"date"),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(f.pc(8,1,null==t.ticketData?null:t.ticketData.closedDateTime,"mediumDate"))}}function Pt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Modified\xa0By"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(null==t.ticketData||null==t.ticketData.modifiedBy?null:t.ticketData.modifiedBy.name)}}function Qt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3,"Modified\xa0On"),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.nc(8,"date"),f.ac(),f.ac()),2&t){const t=f.mc();f.Kb(7),f.Rc(f.pc(8,1,null==t.ticketData?null:t.ticketData.modifiedOn,"mediumDate"))}}function Ot(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3),f.ac(),f.ac(),f.Wb(4,"br"),f.Wb(5,"br"),f.Wb(6,"img",13),f.ac()),2&t){const t=c.$implicit,e=c.index;f.Kb(3),f.Sc("Image\xa0File\xa0",e+1,""),f.Kb(3),f.tc("src",t,f.Hc)}}function Ct(t,c){if(1&t&&(f.bc(0,"div",1),f.Pc(1,Ot,7,2,"div",12),f.ac()),2&t){const t=f.mc();f.Kb(1),f.tc("ngForOf",null==t.ticketData?null:t.ticketData.image)}}function wt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3),f.ac(),f.ac(),f.Wb(4,"br"),f.Wb(5,"br"),f.bc(6,"audio",14),f.Wb(7,"source",15),f.Wb(8,"source",16),f.ac(),f.ac()),2&t){const t=c.$implicit,e=c.index;f.Kb(3),f.Sc("Audio\xa0File\xa0",e+1,""),f.Kb(4),f.tc("src",t,f.Hc),f.Kb(1),f.tc("src",t,f.Hc)}}function Kt(t,c){if(1&t&&(f.bc(0,"div",1),f.Pc(1,wt,9,3,"div",12),f.ac()),2&t){const t=f.mc();f.Kb(1),f.tc("ngForOf",null==t.ticketData?null:t.ticketData.audio)}}function Tt(t,c){if(1&t&&(f.bc(0,"div",11),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3),f.ac(),f.ac(),f.Wb(4,"br"),f.Wb(5,"br"),f.Wb(6,"img",19),f.ac()),2&t){const t=c.$implicit,e=c.index;f.Kb(3),f.Sc("Replay\xa0Image\xa0File\xa0",e+1,""),f.Kb(3),f.tc("src",t,f.Hc)}}function _t(t,c){if(1&t&&(f.bc(0,"div",10),f.bc(1,"span"),f.bc(2,"b"),f.Qc(3),f.ac(),f.ac(),f.bc(4,"span"),f.Qc(5,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(6,"span"),f.Qc(7),f.ac(),f.Wb(8,"br"),f.bc(9,"span"),f.bc(10,"b"),f.Qc(11,"Created on"),f.ac(),f.ac(),f.bc(12,"span"),f.Qc(13,"\xa0\xa0:\xa0\xa0"),f.ac(),f.bc(14,"span"),f.Qc(15),f.nc(16,"date"),f.ac(),f.Wb(17,"br"),f.bc(18,"div",1),f.Pc(19,Tt,7,2,"div",12),f.ac(),f.Wb(20,"hr"),f.ac()),2&t){const t=c.$implicit,e=c.index;f.Kb(3),f.Sc("Reply Message\xa0",e+1,""),f.Kb(4),f.Rc(null==t?null:t.reply_message),f.Kb(8),f.Rc(f.pc(16,4,null==t?null:t.createdOn,"medium")),f.Kb(4),f.tc("ngForOf",null==t?null:t.reply_image)}}function Mt(t,c){if(1&t&&(f.bc(0,"div",1),f.Wb(1,"hr"),f.bc(2,"h2",17),f.Qc(3,"Given Reply's"),f.ac(),f.Pc(4,_t,21,7,"div",18),f.ac()),2&t){const t=f.mc();f.Kb(4),f.tc("ngForOf",null==t.ticketData?null:t.ticketData.reply)}}const It=[{path:"",children:[{path:"list",component:rt},{path:"ticket/view",component:(()=>{class t{constructor(t,c,e,i,a){this.helperService=t,this.router=c,this.awsS3=e,this.departmentsService=i,this.dialog=a,this.reply_image=[]}ngOnInit(){this.getTickeData()}getTickeData(){this.ticketUUid=localStorage.getItem("ticketUUid"),this.departmentsService.getTicketByUUid(this.ticketUUid).subscribe(t=>{this.ticketData=t.response,console.log("this.ticketData",this.ticketData)})}upload(t,c){return Object(m.a)(this,void 0,void 0,function*(){return this.fileName=t,console.log("event",t),yield this.awsS3.uploadFile(t,"uploads").then(t=>{var e;console.log("result",t),c?c.fileUrl=null===(e=t[0])||void 0===e?void 0:e.Location:(this.reply_image=t.map(t=>t.Location),console.log("student_image_path",this.reply_image))}),!1})}updateCloseStatus(){let t={uuid:this.ticketData.uuid,status:4,reply_message:this.message.nativeElement.value?this.message.nativeElement.value:"",reply_image:this.reply_image.length?this.reply_image:[],modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")}};console.log("payload",t),this.departmentsService.updateTicket(t).subscribe(t=>{t&&this.router.navigate(["manage/complaints/list"])})}backToTickets(){this.router.navigate(["manage/complaints/list"])}sendReplay(){this.dialog.open(Q,{data:{payload:this.ticketData},height:"96%",width:"80%"})}}return t.\u0275fac=function(c){return new(c||t)(f.Vb(s.P),f.Vb(l.f),f.Vb(s.a),f.Vb(s.E),f.Vb(p.c))},t.\u0275cmp=f.Pb({type:t,selectors:[["application-view-ticket"]],viewQuery:function(t,c){if(1&t&&f.Vc(bt,!0),2&t){let t;f.Bc(t=f.jc())&&(c.message=t.first)}},decls:39,vars:17,consts:[[3,"click"],[1,"row"],["id","replay",1,"col-sm-12"],["class","col-sm-12",4,"ngIf"],["class","col-sm-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-sm-5"],[1,"col-sm-1"],["mat-raised-button","","color","primary",1,"paymentsButton",3,"click"],["mat-raised-button","","color","warn",1,"paymentsButton",3,"click"],[1,"col-sm-12"],[1,"col-sm-4"],["class","col-sm-4",4,"ngFor","ngForOf"],["alt","img",2,"width","100%","height","300px",3,"src"],["controls",""],["type","audio/ogg",3,"src"],["type","audio/mpeg",3,"src"],[2,"text-align","center"],["class","col-sm-12",4,"ngFor","ngForOf"],["alt","img",2,"width","100%","height","250px",3,"src"]],template:function(t,c){1&t&&(f.bc(0,"mat-card"),f.bc(1,"h2"),f.bc(2,"b",0),f.ic("click",function(){return c.backToTickets()}),f.Qc(3),f.ac(),f.Qc(4,"Ticket Details"),f.ac(),f.Wb(5,"br"),f.Wb(6,"br"),f.bc(7,"div",1),f.bc(8,"div",2),f.bc(9,"div",1),f.Pc(10,dt,8,1,"div",3),f.ac(),f.bc(11,"div",1),f.Pc(12,mt,8,1,"div",4),f.Pc(13,pt,8,1,"div",4),f.Pc(14,ft,8,1,"div",4),f.Pc(15,gt,8,1,"div",4),f.Pc(16,ht,8,1,"div",4),f.Pc(17,kt,8,1,"div",4),f.Pc(18,vt,9,4,"div",4),f.Pc(19,Dt,9,4,"div",4),f.Pc(20,yt,8,3,"div",4),f.Pc(21,St,9,4,"div",4),f.Pc(22,Pt,8,1,"div",4),f.Pc(23,Qt,9,4,"div",4),f.ac(),f.Pc(24,Ct,2,1,"div",5),f.Pc(25,Kt,2,1,"div",5),f.Wb(26,"br"),f.Pc(27,Mt,5,1,"div",5),f.ac(),f.ac(),f.Wb(28,"br"),f.Wb(29,"br"),f.bc(30,"div",1),f.Wb(31,"div",6),f.bc(32,"div",7),f.bc(33,"button",8),f.ic("click",function(){return c.sendReplay()}),f.Qc(34,"Reply"),f.ac(),f.ac(),f.bc(35,"div",7),f.bc(36,"button",9),f.ic("click",function(){return c.backToTickets()}),f.Qc(37,"Back"),f.ac(),f.ac(),f.Wb(38,"div",6),f.ac(),f.ac()),2&t&&(f.Kb(3),f.Sc("",null==c.ticketData?null:c.ticketData.ticketId,"\xa0/\xa0"),f.Kb(7),f.tc("ngIf",null==c.ticketData?null:c.ticketData.message),f.Kb(2),f.tc("ngIf",null==c.ticketData?null:c.ticketData.ticketId),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.user),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.user),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.department),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.type),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.priority),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.createdOn),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.lastUpdated),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.status),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.closedDateTime),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.modifiedBy),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.modifiedOn),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.image.length),f.Kb(1),f.tc("ngIf",null==c.ticketData?null:c.ticketData.audio.length),f.Kb(2),f.tc("ngIf",null==c.ticketData?null:c.ticketData.reply.length))},directives:[ut.a,i.o,k.a,i.n],pipes:[i.f],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:50px}td[_ngcontent-%COMP%]{width:250px}.paymentsButton[_ngcontent-%COMP%]{width:100%}.col-sm-4[_ngcontent-%COMP%]{margin-top:28px}.ticket[_ngcontent-%COMP%]{width:100%}span[_ngcontent-%COMP%]{width:33.33%}h2[_ngcontent-%COMP%]{font-size:22px;font-weight:600}h2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#3498db}h2[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:hover{cursor:pointer;border-bottom:3px solid #3498db}#replay[_ngcontent-%COMP%]{border:1px solid #e0dfdf;border-radius:10px;margin-top:-28px}mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.savebutton[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:"",outlet:"aside",component:o.a},{path:"",pathMatch:"full",redirectTo:"/manage/complaints/list"}]}];let Rt=(()=>{class t{}return t.\u0275mod=f.Tb({type:t}),t.\u0275inj=f.Sb({factory:function(c){return new(c||t)},imports:[[i.c,a.c,n.u,l.j.forChild(It),s.zb]]}),t})()}}]);