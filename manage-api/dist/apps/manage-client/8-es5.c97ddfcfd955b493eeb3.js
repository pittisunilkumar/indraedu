!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{VDjS:function(e,a,r){"use strict";r.r(a),r.d(a,"DeparmentModule",function(){return rt});var i=r("ofXK"),c=r("sYmb"),o=r("3Pt+"),l=r("tyNb"),m=r("HYn3"),s=r("LavL"),d=r("mrSG"),u=r("7Cbv"),p=r("fXoL"),f=r("Wp6s"),b=r("A/5o"),h=r("kmnG"),g=r("qFsG"),v=r("d3UM"),D=r("bSwM"),y=r("bTqV"),C=r("FKr1");function O(t,e){1&t&&(p.bc(0,"h2"),p.bc(1,"span",13),p.Qc(2,"Create\xa0Event"),p.ac(),p.ac())}function P(t,e){1&t&&(p.bc(0,"h2"),p.bc(1,"span",13),p.Qc(2,"Edit\xa0Event"),p.ac(),p.ac())}function w(t,e){if(1&t&&(p.bc(0,"mat-option",20),p.Qc(1),p.ac()),2&t){var n=e.$implicit;p.tc("value",n),p.Kb(1),p.Sc(" ",n.name,"")}}function M(t,e){if(1&t){var n=p.cc();p.bc(0,"mat-option",21,22),p.ic("click",function(){p.Fc(n);var t=e.$implicit,a=p.Cc(1);return p.mc().insertAndDeleteArray(a._selected,t._id)}),p.Qc(2),p.ac()}if(2&t){var a=e.$implicit;p.tc("value",a),p.Kb(2),p.Sc(" ",a.name,"")}}function A(t,e){if(1&t){var n=p.cc();p.bc(0,"button",23),p.ic("click",function(){return p.Fc(n),p.mc().resetForm()}),p.Qc(1," Reset "),p.ac()}}var _,k=((_=function(){function e(n,a,r,i,c,o){t(this,e),this.formBuilder=n,this.helper=a,this.route=r,this.departmentsService=i,this.router=c,this.employeeService=o,this.mode=this.route.snapshot.data.mode,this.insertDepartmentArray=[],this.deleteDepartmentArray=[]}return n(e,[{key:"ngOnInit",value:function(){var t;return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.createDepartmentForm=this.buildForm(),"edit"!==this.mode){e.next=8;break}return a=this.route.snapshot.paramMap.get("uuid"),e.next=4,this.departmentsService.getDepartmentByUuid(a).toPromise();case 4:n=e.sent,this.department=n.response,this.insertDepartmentArray=null===(t=this.department)||void 0===t?void 0:t.hod.map(function(t){return null==t?void 0:t._id}),this.createDepartmentForm=this.buildForm();case 8:this.getEmployees();case 9:case"end":return e.stop()}},e,this)}))}},{key:"buildForm",value:function(){var t,e,n,a;return this.formBuilder.group({title:[this.department?null===(t=this.department)||void 0===t?void 0:t.title:"",o.v.required],employee:[this.department?null===(e=this.department)||void 0===e?void 0:e.employee:"",o.v.required],hod:[this.department?null===(n=this.department)||void 0===n?void 0:n.hod:"",o.v.required],flags:this.formBuilder.group({active:!this.department||(null===(a=this.department)||void 0===a?void 0:a.flags.active)})})}},{key:"getEmployees",value:function(){var t=this;this.employeeService.getAllEmployees().subscribe(function(e){t.employeeList=null==e?void 0:e.response})}},{key:"insertAndDeleteArray",value:function(t,e){1==t?(this.insertDepartmentArray=this.insertDepartmentArray.filter(function(t){return t!=e}),this.deleteDepartmentArray=this.deleteDepartmentArray.filter(function(t){return t!=e}),this.insertDepartmentArray.push(e)):0==t&&(this.deleteDepartmentArray=this.deleteDepartmentArray.filter(function(t){return t!=e}),this.insertDepartmentArray=this.insertDepartmentArray.filter(function(t){return t!=e}),this.deleteDepartmentArray.push(e)),console.log("deleteDepartmentArray",this.deleteDepartmentArray),console.log("insertDepartmentArray",this.insertDepartmentArray)}},{key:"submit",value:function(){var t,e,n,a,r=this,i=this.createDepartmentForm.value;if("add"===this.mode){var c={uuid:u.a(),title:i.title,employee:i.employee.map(function(t){return t._id}),hod:i.hod.map(function(t){return t._id}),createdOn:new Date,createdBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")},flags:{active:i.flags.active}};console.log(c),this.departmentsService.addDepartment(c).subscribe(function(t){t&&r.router.navigate(["/manage/department/list"])})}else{this.insertDepartmentArray.map(function(t){r.department.hod.map(function(e){e._id==t&&(r.insertDepartmentArray=r.insertDepartmentArray.filter(function(t){return e._id!=t}))})}),this.deleteDepartmentArray.map(function(t){r.department.hod.map(function(e){e._id!=t&&(r.deleteDepartmentArray=r.deleteDepartmentArray.filter(function(n){return e._id!=t}))})});var o={_id:null===(t=this.department)||void 0===t?void 0:t._id,uuid:null===(e=this.department)||void 0===e?void 0:e.uuid,title:i.title,employee:i.employee,hod:i.hod,insertDepartmentArray:this.insertDepartmentArray,deleteDepartmentArray:this.deleteDepartmentArray,createdBy:null===(n=this.department)||void 0===n?void 0:n.createdBy,createdOn:null===(a=this.department)||void 0===a?void 0:a.createdOn,modifiedOn:new Date,modifiedBy:{uuid:localStorage.getItem("currentUserUuid"),name:localStorage.getItem("currentUserName")},flags:{active:i.flags.active}};console.log(o),this.departmentsService.editDepartmentByUuid(o).subscribe(function(t){t&&r.router.navigate(["/manage/department/list"])})}}},{key:"resetForm",value:function(){this.createDepartmentForm.reset()}}]),e}()).\u0275fac=function(t){return new(t||_)(p.Vb(o.e),p.Vb(m.P),p.Vb(l.a),p.Vb(m.E),p.Vb(l.f),p.Vb(m.L))},_.\u0275cmp=p.Pb({type:_,selectors:[["application-create-department"]],decls:41,vars:13,consts:[[1,"create-tags"],[4,"ngIf"],[3,"formGroup"],[1,"flex-wrap"],[1,"form-element","child"],[1,"example-form-field"],["matInput","","name","title","formControlName","title"],[1,"example-full-width"],["formControlName","employee","multiple","",3,"compareWith"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hod","multiple","",3,"compareWith"],[3,"value","click",4,"ngFor","ngForOf"],[1,"form-element","child","flags",3,"formGroup"],["translate",""],["for","isActive"],["name","active","formControlName","active",1,"example-margin"],[1,"text-right","button-group"],["mat-stroked-button","","color","warn","translate","",3,"click",4,"ngIf"],["routerLink","/manage/events/list","mat-raised-button","","color","warn","translate",""],["mat-raised-button","","color","primary","type","submit","translate","",3,"disabled","click"],[3,"value"],[3,"value","click"],["EVENT",""],["mat-stroked-button","","color","warn","translate","",3,"click"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.Pc(1,O,3,0,"h2",1),p.Pc(2,P,3,0,"h2",1),p.bc(3,"mat-card"),p.bc(4,"form",2),p.bc(5,"div",3),p.bc(6,"div",4),p.bc(7,"mat-form-field",5),p.bc(8,"mat-label"),p.Qc(9,"Department Title\xa0"),p.bc(10,"sup"),p.Qc(11,"*"),p.ac(),p.ac(),p.Wb(12,"input",6),p.ac(),p.ac(),p.bc(13,"div",4),p.bc(14,"mat-form-field",7),p.bc(15,"mat-label"),p.Qc(16,"Employees"),p.ac(),p.bc(17,"mat-select",8),p.Pc(18,w,2,2,"mat-option",9),p.ac(),p.ac(),p.ac(),p.bc(19,"div",4),p.bc(20,"mat-form-field",7),p.bc(21,"mat-label"),p.Qc(22,"Head\xa0Of\xa0Department"),p.ac(),p.bc(23,"mat-select",10),p.Pc(24,M,3,2,"mat-option",11),p.ac(),p.ac(),p.ac(),p.ac(),p.bc(25,"div",12),p.bc(26,"strong"),p.bc(27,"span",13),p.Qc(28,"COMMON.FLAGS"),p.ac(),p.ac(),p.bc(29,"div",3),p.bc(30,"div",4),p.bc(31,"label",14),p.bc(32,"mat-checkbox",15),p.Qc(33),p.nc(34,"translate"),p.ac(),p.ac(),p.ac(),p.ac(),p.ac(),p.bc(35,"div",16),p.Pc(36,A,2,0,"button",17),p.bc(37,"button",18),p.Qc(38," Cancel "),p.ac(),p.bc(39,"button",19),p.ic("click",function(){return e.submit()}),p.Qc(40," Submit "),p.ac(),p.ac(),p.ac(),p.ac(),p.ac()),2&t&&(p.Kb(1),p.tc("ngIf","add"===e.mode),p.Kb(1),p.tc("ngIf","edit"===e.mode),p.Kb(2),p.tc("formGroup",e.createDepartmentForm),p.Kb(13),p.tc("compareWith",e.helper.compareFn),p.Kb(1),p.tc("ngForOf",e.employeeList),p.Kb(5),p.tc("compareWith",e.helper.compareFn),p.Kb(1),p.tc("ngForOf",null==e.createDepartmentForm||null==e.createDepartmentForm.value?null:e.createDepartmentForm.value.employee),p.Kb(1),p.tc("formGroup",null==e.createDepartmentForm||null==e.createDepartmentForm.controls?null:e.createDepartmentForm.controls.flags),p.Kb(8),p.Rc(p.oc(34,11,"COMMON.ACTIVE")),p.Kb(3),p.tc("ngIf","add"===e.mode),p.Kb(3),p.tc("disabled",!e.createDepartmentForm.valid))},directives:[i.o,f.a,o.x,o.q,b.a,o.i,h.b,h.e,g.b,o.c,o.p,o.g,v.a,i.n,c.a,D.a,y.a,l.g,C.m],pipes:[c.d],styles:[".flags[_ngcontent-%COMP%]{flex:0 1 auto}.form-element[_ngcontent-%COMP%]{flex-grow:2;margin-right:1rem}.form-element[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.confirm-step.flex-wrap[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{width:33.33%}.confirm-step.flex-wrap[_ngcontent-%COMP%]   .w-1-1[_ngcontent-%COMP%]{width:100%}.spacer[_ngcontent-%COMP%]{flex:8 auto}"]}),_),F=r("M9IT"),S=r("Dh3D"),x=r("+0xr"),I=r("w4Ql"),K=r("quSY"),Q=r("0IaG"),E=r("STbY"),L=function(){return["../","create"]};function T(t,e){1&t&&(p.bc(0,"button",23),p.Qc(1,"Create Department"),p.ac()),2&t&&p.tc("routerLink",p.yc(1,L))}function N(t,e){1&t&&(p.bc(0,"th",24),p.Qc(1," S.No "),p.ac())}function V(t,e){if(1&t&&(p.bc(0,"td",25),p.Qc(1),p.ac()),2&t){var n=e.$implicit,a=p.mc();p.Kb(1),p.Rc(a.filteredDepartments.filteredData.indexOf(n)+1)}}function R(t,e){1&t&&(p.bc(0,"th",26),p.Qc(1),p.nc(2,"translate"),p.ac()),2&t&&(p.Kb(1),p.Sc(" ",p.oc(2,1,"COMMON.TITLE")," "))}function B(t,e){if(1&t&&(p.bc(0,"td",25),p.Qc(1),p.ac()),2&t){var n=e.$implicit;p.Kb(1),p.Rc(n.title)}}function G(t,e){1&t&&(p.bc(0,"th",26),p.Qc(1," Head\xa0Of\xa0Department "),p.ac())}function $(t,e){if(1&t&&(p.bc(0,"div"),p.bc(1,"span"),p.Qc(2),p.ac(),p.ac()),2&t){var n=e.$implicit,a=e.index,r=p.mc().$implicit;p.Kb(2),p.Tc("",n.name," ",(null==r?null:r.hod.length)!=a+1?",":""," ")}}function U(t,e){if(1&t&&(p.bc(0,"td",25),p.Pc(1,$,3,2,"div",27),p.ac()),2&t){var n=e.$implicit;p.Kb(1),p.tc("ngForOf",null==n?null:n.hod)}}function H(t,e){1&t&&(p.bc(0,"th",26),p.Qc(1),p.nc(2,"translate"),p.ac()),2&t&&(p.Kb(1),p.Sc(" ",p.oc(2,1,"COMMON.ACTIVE")," "))}function W(t,e){if(1&t&&(p.bc(0,"td",25),p.Qc(1),p.ac()),2&t){var n=e.$implicit;p.Kb(1),p.Rc(n.flags.active)}}function Y(t,e){1&t&&(p.bc(0,"th",26),p.Qc(1),p.nc(2,"translate"),p.ac()),2&t&&(p.Kb(1),p.Sc(" ",p.oc(2,1,"COMMON.ACTIONS.TITLE")," "))}var j=function(t){return["../",t,"edit"]};function q(t,e){if(1&t&&(p.bc(0,"a",32),p.bc(1,"button",33),p.Qc(2," Edit\xa0Department "),p.ac(),p.ac()),2&t){var n=p.mc().$implicit;p.tc("routerLink",p.zc(1,j,n.uuid))}}function z(t,e){if(1&t){var n=p.cc();p.bc(0,"button",34),p.ic("click",function(){p.Fc(n);var t=p.mc().$implicit;return p.mc().delete(t)}),p.Qc(1," Delete\xa0Department "),p.ac()}}function Z(t,e){if(1&t&&(p.bc(0,"td",25),p.bc(1,"i",28),p.Qc(2,"more_vert"),p.ac(),p.bc(3,"mat-menu",null,29),p.Pc(5,q,3,3,"a",30),p.Pc(6,z,2,0,"button",31),p.ac(),p.ac()),2&t){var n=p.Cc(4),a=p.mc();p.Kb(1),p.tc("matMenuTriggerFor",n),p.Kb(4),p.tc("ngIf",a.isEditVisible),p.Kb(1),p.tc("ngIf",a.isDeleteVisible)}}function J(t,e){1&t&&p.Wb(0,"tr",35)}function X(t,e){1&t&&p.Wb(0,"tr",36)}function tt(t,e){1&t&&(p.bc(0,"tr",37),p.bc(1,"td",38),p.bc(2,"h3",7),p.Qc(3,"COMMON.NO_DATA"),p.ac(),p.ac(),p.ac())}var et,nt,at=[{path:"",children:[{path:"create",canActivate:[m.y],component:k,data:{mode:"add"}},{path:":uuid/edit",canActivate:[m.G],component:k,data:{mode:"edit"}},{path:"list",component:(et=function(){function e(n,a,r,i){t(this,e),this.departmentsService=n,this.dialog=a,this.helper=r,this.router=i,this.totalLength=[10,25,50,100],this.sub=new K.a,this.displayedColumns=["sno","title","hod","status","actions"],this.today=new Date}return n(e,[{key:"loadData",value:function(){var t=this;this.departmentsService.getAllDepartments().subscribe(function(e){t.departments=t.filteredDepartments=null==e?void 0:e.response,t.filteredDepartments=new x.l(t.filteredDepartments),t.filteredDepartments.paginator=t.paginator,t.filteredDepartments.sort=t.sort})}},{key:"ngOnInit",value:function(){this.loadPermissions(),this.loadData()}},{key:"delete",value:function(t){var e=this;this.dialog.open(m.q,{data:{payload:t}}).afterClosed().subscribe(function(n){n&&e.sub.add(e.departmentsService.deleteEventByUuid(t._id).subscribe(function(t){e.loadData()},function(t){e.errors=t.error.error}))})}},{key:"filterDepartments",value:function(t){var e=t.target.value.toLowerCase().trim();this.filteredDepartments=e?this.departments.filter(function(t){return t.title.toLowerCase().includes(e)}):this.departments,this.filteredDepartments=new x.l(this.filteredDepartments),this.filteredDepartments.paginator=this.paginator,this.filteredDepartments.sort=this.sort}},{key:"loadPermissions",value:function(){var t=this,e=this.helper.enumtoArray(I.d),n=this.helper.enumtoArray(I.e),a=localStorage.getItem("role"),r=JSON.parse(localStorage.getItem("roleData"));a&&r[0].rolePermissions.map(function(a){a.module[0].title===e.type.DEPARTMENT&&a.subModules.map(function(e){e.title==n.type.ADD?t.isAddVisible=!0:e.title==n.type.DELETE?t.isDeleteVisible=!0:e.title==n.type.EDIT&&(t.isEditVisible=!0)})})}}]),e}(),et.\u0275fac=function(t){return new(t||et)(p.Vb(m.E),p.Vb(Q.c),p.Vb(m.P),p.Vb(l.f))},et.\u0275cmp=p.Pb({type:et,selectors:[["application-department-list"]],viewQuery:function(t,e){var n;1&t&&(p.Lc(S.a,!0),p.Lc(F.a,!0)),2&t&&(p.Bc(n=p.jc())&&(e.sort=n.first),p.Bc(n=p.jc())&&(e.paginator=n.first))},decls:34,vars:9,consts:[[1,"tag-list"],[1,"page-title"],[1,"title"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[1,"search","full-width"],[1,"example-full-width"],["translate",""],["type","search","matInput","","name","search",3,"placeholder","keyup"],[1,"mat-elevation-z1"],["mat-table","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","","style","width: 20px;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","hod"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row","style","text-align: center;",4,"matNoDataRow"],[3,"showFirstLastButtons","pageSizeOptions"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-header-cell","",2,"width","20px"],["mat-cell",""],["mat-header-cell",""],[4,"ngFor","ngForOf"],[1,"material-icons",2,"margin-left","10px",3,"matMenuTriggerFor"],["menu","matMenu"],["style","text-decoration: none;",3,"routerLink",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],["mat-menu-item","","color","primary"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row",2,"text-align","center"],["colspan","5",1,"mat-cell"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.bc(1,"div",1),p.bc(2,"div",2),p.bc(3,"h2"),p.Qc(4,"Departments"),p.ac(),p.ac(),p.bc(5,"div",3),p.Pc(6,T,2,2,"button",4),p.ac(),p.ac(),p.bc(7,"div",5),p.bc(8,"mat-form-field",6),p.bc(9,"mat-label",7),p.Qc(10,"COMMON.SEARCH"),p.ac(),p.bc(11,"input",8),p.ic("keyup",function(t){return e.filterDepartments(t)}),p.nc(12,"translate"),p.ac(),p.ac(),p.ac(),p.bc(13,"div",9),p.bc(14,"table",10),p.Zb(15,11),p.Pc(16,N,2,0,"th",12),p.Pc(17,V,2,1,"td",13),p.Yb(),p.Zb(18,14),p.Pc(19,R,3,3,"th",15),p.Pc(20,B,2,1,"td",13),p.Yb(),p.Zb(21,16),p.Pc(22,G,2,0,"th",15),p.Pc(23,U,2,1,"td",13),p.Yb(),p.Zb(24,17),p.Pc(25,H,3,3,"th",15),p.Pc(26,W,2,1,"td",13),p.Yb(),p.Zb(27,18),p.Pc(28,Y,3,3,"th",15),p.Pc(29,Z,7,3,"td",13),p.Yb(),p.Pc(30,J,1,0,"tr",19),p.Pc(31,X,1,0,"tr",20),p.Pc(32,tt,4,0,"tr",21),p.ac(),p.Wb(33,"mat-paginator",22),p.ac(),p.ac()),2&t&&(p.Kb(6),p.tc("ngIf",e.isAddVisible),p.Kb(5),p.tc("placeholder",p.oc(12,7,"PAGE.ORGANIZATION_LIST.SEARCH")),p.Kb(3),p.tc("dataSource",e.filteredDepartments),p.Kb(16),p.tc("matHeaderRowDef",e.displayedColumns),p.Kb(1),p.tc("matRowDefColumns",e.displayedColumns),p.Kb(2),p.tc("showFirstLastButtons",!0)("pageSizeOptions",e.totalLength))},directives:[i.o,h.b,h.e,c.a,g.b,x.k,x.c,x.e,x.b,x.g,x.j,x.h,F.a,y.a,l.g,x.d,x.a,i.n,E.d,E.a,l.i,E.b,x.f,x.i],pipes:[c.d],styles:[".material-icons[_ngcontent-%COMP%]{cursor:pointer;margin:2px;border:1px solid #e7e6e6;border-radius:7px;padding:1px}.tag-list[_ngcontent-%COMP%]{margin:1rem 0}.tag-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:1rem;width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:1rem;text-align:center}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]{width:100%}.tag-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .tag-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]}),et)},{path:"",outlet:"aside",component:s.a},{path:"",pathMatch:"full",redirectTo:"/manage/department/list"}]}],rt=((nt=function e(){t(this,e)}).\u0275mod=p.Tb({type:nt}),nt.\u0275inj=p.Sb({factory:function(t){return new(t||nt)},imports:[[i.c,c.c,o.u,l.j.forChild(at),m.zb]]}),nt)}}])}();